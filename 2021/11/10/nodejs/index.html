<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#3367D6"/>
  <link rel="apple-touch-icon" href="/icons-192.png">
  <link rel="manifest" href="/manifest.json">
  
  <meta name="generator" content="Hexo 5.4.0">

  

  

  
    <meta name="author" content="chendx">
  

  

  

  <title>nodejs | chendxåšå®¢</title>

  

  
    <link rel="shortcut icon" href="/favicon.ico">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@1.1.3/index.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlightjs@9.16.2/styles/monokai.css">
  

  
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
  <div class="root-container">
    
<!-- header container -->
<header class="header-container post">
  
    <div class="post-image" style="background-image: url(https://qiniu.sukoshi.xyz/src/images/68686407_p0.jpg)"></div>
  

  <!-- navbar -->
<nav class="navbar">
  <div class="navbar-content">
    <!-- logo -->
    <div class="navbar-logo">
      <a href="/">
        
          chendxåšå®¢
        
      </a>
    </div>
    <!-- link -->
    <div class="navbar-link">
      <div class="navbar-btn">
        <div></div>
        <div></div>
        <div></div>
      </div>
      <ul class="navbar-list">
        
          <li class="navbar-list-item"><a href="/">é¦–é¡µ</a></li>
        
          <li class="navbar-list-item"><a href="/links">å‹é“¾</a></li>
        
          <li class="navbar-list-item"><a href="/about">å…³äº</a></li>
        
      </ul>
    </div>
  </div>
</nav>

  
  

  
  

  
  

  
  

  
  
    <div class="header-content">
      <div class="post-text layout-block">
        <div class="layout-margin">
          <h1 class="title-wrap">nodejs</h1>
          <h2 class="title-sub-wrap">
            <strong>chendx</strong>
            <span>å‘å¸ƒäº</span>
            <time  class="article-date" datetime="2021-11-10T15:20:37.000Z" itemprop="datePublished">2021-11-10</time>
          </h2>
          <ul class="wrap-list dark">
  
</ul>
          <ul class="wrap-list dark">
  
    <li><a href="/tags/nodejs/">ğŸ·ï¸ nodejs</a></li>
  
</ul>
        </div>
      </div>
    </div>
  

  
  
  
</header>

    <!-- æ–‡ç«  -->

<!-- æ–‡ç« å†…å®¹ -->
<div class="body-container">
  <article class="content-container layout-block post-container">
    <div class="article-info">
      
      
      
      
      <section class="article-entry markdown-body layout-margin content-padding--large soft-size--large soft-style--box">
        <p>â€”è½¬è½½è‡³é»‘é©¬æé¹å‘¨è€å¸ˆnodejsç¬”è®°ï¼Œä»…ä¾›å­¦ä¹ ä½¿ç”¨</p>
<h1 id="Nodeä»‹ç»"><a href="#Nodeä»‹ç»" class="headerlink" title="Nodeä»‹ç»"></a>Nodeä»‹ç»</h1><h2 id="ä¸ºä»€ä¹ˆè¦å­¦ä¹ Node-js"><a href="#ä¸ºä»€ä¹ˆè¦å­¦ä¹ Node-js" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å­¦ä¹ Node.js"></a>ä¸ºä»€ä¹ˆè¦å­¦ä¹ Node.js</h2><ul>
<li>ä¼ä¸šéœ€æ±‚<ul>
<li>å…·æœ‰æœåŠ¡ç«¯å¼€å‘ç»éªŒæ›´æ”¹</li>
<li>front-end</li>
<li>back-end</li>
<li>å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ</li>
<li>åŸºæœ¬çš„ç½‘ç«™å¼€å‘èƒ½åŠ›<ul>
<li>æœåŠ¡ç«¯</li>
<li>å‰ç«¯</li>
<li>è¿ç»´éƒ¨ç½²</li>
</ul>
</li>
<li>å¤šäººç¤¾åŒº</li>
</ul>
</li>
</ul>
<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200317114503403.png" alt="image-20200317114503403"></p>
<h2 id="Node-jsæ˜¯ä»€ä¹ˆ"><a href="#Node-jsæ˜¯ä»€ä¹ˆ" class="headerlink" title="Node.jsæ˜¯ä»€ä¹ˆ"></a>Node.jsæ˜¯ä»€ä¹ˆ</h2><ul>
<li>Node.jsæ˜¯JavaScript è¿è¡Œæ—¶</li>
<li>é€šä¿—æ˜“æ‡‚çš„è®²ï¼ŒNode.jsæ˜¯JavaScriptçš„è¿è¡Œå¹³å°</li>
<li>Node.jsæ—¢ä¸æ˜¯è¯­è¨€ï¼Œä¹Ÿä¸æ˜¯æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¹³å°</li>
<li>æµè§ˆå™¨ä¸­çš„JavaScript<ul>
<li>EcmaScript<ul>
<li>åŸºæœ¬è¯­æ³•</li>
<li>if</li>
<li>var</li>
<li>function</li>
<li>Object</li>
<li>Array</li>
</ul>
</li>
<li>Bom</li>
<li>Dom</li>
</ul>
</li>
<li>Node.jsä¸­çš„JavaScript<ul>
<li>æ²¡æœ‰Bomï¼ŒDom</li>
<li>EcmaScript</li>
<li>åœ¨Nodeä¸­è¿™ä¸ªJavaScriptæ‰§è¡Œç¯å¢ƒä¸ºJavaScriptæä¾›äº†ä¸€äº›æœåŠ¡å™¨çº§åˆ«çš„API<ul>
<li>ä¾‹å¦‚æ–‡ä»¶çš„è¯»å†™</li>
<li>ç½‘ç»œæœåŠ¡çš„æ„å»º</li>
<li>ç½‘ç»œé€šä¿¡</li>
<li>httpæœåŠ¡å™¨</li>
</ul>
</li>
</ul>
</li>
<li>æ„å»ºä¸Chromeçš„V8å¼•æ“ä¹‹ä¸Š<ul>
<li>ä»£ç åªæ˜¯å…·æœ‰ç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²</li>
<li>å¼•æ“å¯ä»¥è®¤è¯†å®ƒï¼Œå¸®ä½ è§£æå’Œæ‰§è¡Œ</li>
<li>Google Chromeçš„V8å¼•æ“æ˜¯ç›®å‰å…¬è®¤çš„è§£ææ‰§è¡ŒJavaScriptä»£ç æœ€å¿«çš„</li>
<li>Node.jsçš„ä½œè€…æŠŠGoogle Chromeä¸­çš„V8å¼•æ“ç§»æ¤å‡ºæ¥ï¼Œå¼€å‘äº†ä¸€ä¸ªç‹¬ç«‹çš„JavaScriptè¿è¡Œæ—¶ç¯å¢ƒ</li>
</ul>
</li>
<li>Node.js uses an envent-driven,non-blocking I/O mode that makes it lightweight and efficent.<ul>
<li> envent-driven    äº‹ä»¶é©±åŠ¨</li>
<li> non-blocking I/O mode   éé˜»å¡I/Oæ¨¡å‹ï¼ˆå¼‚æ­¥ï¼‰</li>
<li> ightweight and efficent.   è½»é‡å’Œé«˜æ•ˆ</li>
</ul>
</li>
<li>Node.js package ecosystem,npm,is the larget scosystem of open sourcr libraries in the world<ul>
<li>npm æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„å¼€æºç”Ÿæ€ç³»ç»Ÿ</li>
<li>ç»å¤§å¤šæ•°JavaScriptç›¸å…³çš„åŒ…éƒ½å­˜æ”¾åœ¨npmä¸Šï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†è®©å¼€å‘äººå‘˜æ›´æ–¹ä¾¿çš„å»ä¸‹è½½ä½¿ç”¨</li>
<li>npm install jquery</li>
</ul>
</li>
</ul>
<h2 id="Nodeèƒ½åšä»€ä¹ˆ"><a href="#Nodeèƒ½åšä»€ä¹ˆ" class="headerlink" title="Nodeèƒ½åšä»€ä¹ˆ"></a>Nodeèƒ½åšä»€ä¹ˆ</h2><ul>
<li>webæœåŠ¡å™¨åå°</li>
<li>å‘½ä»¤è¡Œå·¥å…·<ul>
<li>npm(node)</li>
<li>git(cè¯­è¨€)</li>
<li>hexoï¼ˆnodeï¼‰</li>
<li>â€¦</li>
</ul>
</li>
<li>å¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆæ¥è®²ï¼Œæ¥è§¦æœ€å¤šçš„æ˜¯å®ƒçš„å‘½ä»¤è¡Œå·¥å…·<ul>
<li>è‡ªå·±å†™çš„å¾ˆå°‘ï¼Œä¸»è¦æ˜¯ç”¨åˆ«äººç¬¬ä¸‰æ–¹çš„</li>
<li>webpack</li>
<li>gulp</li>
<li>npm</li>
</ul>
</li>
</ul>
<h1 id="èµ·æ­¥"><a href="#èµ·æ­¥" class="headerlink" title="èµ·æ­¥"></a>èµ·æ­¥</h1><h2 id="å®‰è£…Nodeç¯å¢ƒ"><a href="#å®‰è£…Nodeç¯å¢ƒ" class="headerlink" title="å®‰è£…Nodeç¯å¢ƒ"></a>å®‰è£…Nodeç¯å¢ƒ</h2><ul>
<li>æŸ¥çœ‹Nodeç¯å¢ƒçš„ç‰ˆæœ¬å·</li>
<li>ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://nodejs.org/en/">https://nodejs.org/en/</a></li>
<li>å®‰è£…ï¼š<ul>
<li>å‚»ç“œå¼å®‰è£…ï¼Œä¸€è·¯<code>next</code></li>
<li>å®‰è£…è¿‡å†æ¬¡å®‰è£…ä¼šå‡çº§</li>
</ul>
</li>
<li>ç¡®è®¤Nodeç¯å¢ƒæ˜¯å¦å®‰è£…æˆåŠŸ<ul>
<li>æŸ¥çœ‹nodeçš„ç‰ˆæœ¬å·ï¼š<code>node --version</code></li>
<li>æˆ–è€…<code>node -v</code></li>
</ul>
</li>
<li>é…ç½®ç¯å¢ƒå˜é‡</li>
</ul>
<h2 id="è§£ææ‰§è¡ŒJavaScript"><a href="#è§£ææ‰§è¡ŒJavaScript" class="headerlink" title="è§£ææ‰§è¡ŒJavaScript"></a>è§£ææ‰§è¡ŒJavaScript</h2><ol>
<li>åˆ›å»ºç¼–å†™JavaScriptè„šæœ¬æ–‡ä»¶</li>
<li>æ‰“å¼€ç»ˆç«¯ï¼Œå®šä½è„šæœ¬æ–‡ä»¶çš„æ‰€å±ç›®å½•</li>
<li>è¾“å…¥<code>node  æ–‡ä»¶å</code>æ‰§è¡Œå¯¹åº”çš„æ–‡ä»¶</li>
</ol>
<p>æ³¨æ„ï¼šæ–‡ä»¶åä¸è¦ç”¨<code>node.js</code>æ¥å‘½åï¼Œä¹Ÿå°±æ˜¯è¯´é™¤äº†<code>node</code>è¿™ä¸ªåå­—éšä¾¿èµ·ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨ä¸­æ–‡ã€‚</p>
<h2 id="æ–‡ä»¶çš„è¯»å†™"><a href="#æ–‡ä»¶çš„è¯»å†™" class="headerlink" title="æ–‡ä»¶çš„è¯»å†™"></a>æ–‡ä»¶çš„è¯»å†™</h2><p>æ–‡ä»¶è¯»å–:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æµè§ˆå™¨ä¸­çš„JavaScriptæ˜¯æ²¡æœ‰æ–‡ä»¶æ“ä½œèƒ½åŠ›çš„</span></span><br><span class="line"><span class="comment">//ä½†æ˜¯Nodeä¸­çš„JavaScriptå…·æœ‰æ–‡ä»¶æ“ä½œèƒ½åŠ›</span></span><br><span class="line"><span class="comment">//fsæ˜¯file-systemçš„ç®€å†™ï¼Œå°±æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„æ„æ€</span></span><br><span class="line"><span class="comment">//åœ¨Nodeä¸­å¦‚æœæƒ³è¦è¿›è¡Œæ–‡ä»¶çš„æ“ä½œå°±å¿…é¡»å¼•ç”¨fsè¿™ä¸ªæ ¸å¿ƒæ¨¡å—</span></span><br><span class="line"><span class="comment">//åœ¨fsè¿™ä¸ªå’Œå…´æ¨¡å—ä¸­ï¼Œå°±æä¾›äº†äººæ‰€æœ‰æ–‡ä»¶æ“ä½œç›¸å…³çš„API</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚ fs.readFileå°±æ˜¯ç”¨æ¥è¯»å–æ–‡ä»¶çš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  1.ä½¿ç”¨fsæ ¸å¿ƒæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.è¯»å–æ–‡ä»¶</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/a.txt&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ–‡ä»¶è¯»å–å¤±è´¥&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æ–‡ä»¶å†™å…¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  1.ä½¿ç”¨fsæ ¸å¿ƒæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.å°†æ•°æ®å†™å…¥æ–‡ä»¶</span></span><br><span class="line">fs.writeFile(<span class="string">&#x27;./data/a.txt&#x27;</span>,<span class="string">&#x27;æˆ‘æ˜¯æ–‡ä»¶å†™å…¥çš„ä¿¡æ¯&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ–‡ä»¶å†™å…¥å¤±è´¥&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="http"><a href="#http" class="headerlink" title="http"></a>http</h2><p>æœåŠ¡å™¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.åŠ è½½httpæ ¸å¿ƒæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.ä½¿ç”¨http.createServer()åˆ›å»ºä¸€ä¸ªwebæœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.æœåŠ¡å™¨è¦åšçš„äº‹å„¿</span></span><br><span class="line"><span class="comment">// æä¾›æœåŠ¡ï¼šå¯¹æ•°æ®æœåŠ¡</span></span><br><span class="line"><span class="comment">// å‘è¯·æ±‚</span></span><br><span class="line"><span class="comment">//	æ¥æ”¶è¯·æ±‚</span></span><br><span class="line"><span class="comment">//	å¤„ç†è¯·æ±‚</span></span><br><span class="line"><span class="comment">//	åé¦ˆï¼ˆå‘é€å“åº”ï¼‰</span></span><br><span class="line"><span class="comment">//	å½“å®¢æˆ·ç«¯è¯·æ±‚è¿‡æ¥ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘æœåŠ¡å™¨çš„requestè¯·æ±‚äº‹ä»¶ï¼Œç„¶åæ‰§è¡Œç¬¬äºŒä¸ªå‚æ•°ï¼šå›è°ƒå¤„ç†å‡½æ•°</span></span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;æ”¶åˆ°å®¢æˆ·çš„è¯·æ±‚äº†&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.ç»‘å®šç«¯å£å·ï¼Œå¯åŠ¨æœåŠ¡</span></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;runing...&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ"><a href="#Nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ" class="headerlink" title="Nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ"></a>Nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ</h1><p>ä½¿ç”¨Nodeç¼–å†™åº”ç”¨ç¨‹åºä¸»è¦å°±æ˜¯åœ¨ä½¿ç”¨ï¼š</p>
<ul>
<li><p>EcmaScriptè¯­è¨€</p>
<ul>
<li>å’Œæµè§ˆå™¨ä¸€æ ·ï¼Œåœ¨Nodeä¸­æ²¡æœ‰Bomå’ŒDom</li>
</ul>
</li>
<li><p>æ ¸å¿ƒæ¨¡å—</p>
<ul>
<li>æ–‡ä»¶æ“ä½œçš„fs</li>
<li>httpæœåŠ¡æ“ä½œçš„http</li>
<li>urlè·¯å¾„æ“ä½œæ¨¡å—</li>
<li>pathè·¯å¾„å¤„ç†æ¨¡å—</li>
<li>osæ“ä½œç³»ç»Ÿä¿¡æ¯</li>
</ul>
</li>
<li><p>ç¬¬ä¸‰æ–¹æ¨¡å—</p>
<ul>
<li>art-template</li>
<li>å¿…é¡»é€šè¿‡npmæ¥ä¸‹è½½æ‰å¯ä»¥ä½¿ç”¨</li>
</ul>
</li>
<li><p>è‡ªå·±å†™çš„æ¨¡å—</p>
<ul>
<li>è‡ªå·±åˆ›å»ºçš„æ–‡ä»¶</li>
</ul>
</li>
</ul>
<h2 id="ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–"><a href="#ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–"></a>ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–</h2><ul>
<li>æ–‡ä»¶ä½œç”¨åŸŸ(æ¨¡å—æ˜¯ç‹¬ç«‹çš„ï¼Œåœ¨ä¸åŒçš„æ–‡ä»¶ä½¿ç”¨å¿…é¡»è¦é‡æ–°å¼•ç”¨)ã€åœ¨nodeä¸­æ²¡æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œå®ƒæ˜¯æ–‡ä»¶æ¨¡å—ä½œç”¨åŸŸã€‘</li>
<li>é€šä¿¡è§„åˆ™<ul>
<li>åŠ è½½require</li>
<li>å¯¼å‡ºexports</li>
</ul>
</li>
</ul>
<h2 id="CommonJSæ¨¡å—è§„èŒƒ"><a href="#CommonJSæ¨¡å—è§„èŒƒ" class="headerlink" title="CommonJSæ¨¡å—è§„èŒƒ"></a>CommonJSæ¨¡å—è§„èŒƒ</h2><p>åœ¨Nodeä¸­çš„JavaScriptè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œæ¨¡å—ç³»ç»Ÿã€‚</p>
<ul>
<li><p>æ¨¡å—ä½œç”¨åŸŸ</p>
</li>
<li><p>ä½¿ç”¨requireæ–¹æ³•æ¥åŠ è½½æ¨¡å—</p>
</li>
<li><p>ä½¿ç”¨exportsæ¥å£å¯¹è±¡æ¥å¯¼å‡ºæ¨¡æ¿ä¸­çš„æˆå‘˜</p>
<h3 id="åŠ è½½require"><a href="#åŠ è½½require" class="headerlink" title="åŠ è½½require"></a>åŠ è½½<code>require</code></h3><p>è¯­æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> è‡ªå®šä¹‰å˜é‡å = require(<span class="string">&#x27;æ¨¡å—&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>ä½œç”¨ï¼š</p>
<ul>
<li>æ‰§è¡Œè¢«åŠ è½½æ¨¡å—ä¸­çš„ä»£ç </li>
<li>å¾—åˆ°è¢«åŠ è½½æ¨¡å—ä¸­çš„<code>exports</code>å¯¼å‡ºæ¥å£å¯¹è±¡</li>
</ul>
<h3 id="å¯¼å‡ºexports"><a href="#å¯¼å‡ºexports" class="headerlink" title="å¯¼å‡ºexports"></a>å¯¼å‡º<code>exports</code></h3><ul>
<li><p>Nodeä¸­æ˜¯æ¨¡å—ä½œç”¨åŸŸï¼Œé»˜è®¤æ–‡ä»¶ä¸­æ‰€æœ‰çš„æˆå‘˜åªåœ¨å½“å‰æ¨¡å—æœ‰æ•ˆ</p>
</li>
<li><p>å¯¹äºå¸Œæœ›å¯ä»¥è¢«å…¶ä»–æ¨¡å—è®¿é—®åˆ°çš„æˆå‘˜ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™äº›å…¬å¼€çš„æˆå‘˜éƒ½æŒ‚è½½åˆ°<code>exports</code>æ¥å£å¯¹è±¡ä¸­å°±å¯ä»¥äº†</p>
<p>å¯¼å‡ºå¤šä¸ªæˆå‘˜ï¼ˆå¿…é¡»åœ¨å¯¹è±¡ä¸­ï¼‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.a = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">exports</span>.b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;bbb&#x27;</span>)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">exports</span>.c = &#123;</span><br><span class="line">    <span class="attr">foo</span>:<span class="string">&quot;bar&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">exports</span>.d = <span class="string">&#x27;hello&#x27;</span>;</span><br></pre></td></tr></table></figure>



<p>å¯¼å‡ºå•ä¸ªæˆå‘˜ï¼ˆæ‹¿åˆ°çš„å°±æ˜¯å‡½æ•°ï¼Œå­—ç¬¦ä¸²ï¼‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="string">&#x27;hello&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æƒ…å†µä¼šè¦†ç›–ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="comment">//åè€…ä¼šè¦†ç›–å‰è€…</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x,y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ¥å¯¼å‡ºå¤šä¸ªæˆå‘˜ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    foo = <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    <span class="attr">add</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x+y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="æ¨¡å—åŸç†"><a href="#æ¨¡å—åŸç†" class="headerlink" title="æ¨¡å—åŸç†"></a>æ¨¡å—åŸç†</h2><p>exportså’Œ<code>module.exports</code>çš„ä¸€ä¸ªå¼•ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">exports</span> === <span class="built_in">module</span>.exports);	<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.foo = <span class="string">&#x27;bar&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç­‰ä»·äº</span></span><br><span class="line"><span class="built_in">module</span>.exports.foo = <span class="string">&#x27;bar&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><code>å½“ç»™exportsé‡æ–°èµ‹å€¼åï¼Œexportsï¼= module.exports.</code></p>
<p><code>æœ€ç»ˆreturnçš„æ˜¯module.exports,æ— è®ºexportsä¸­çš„æˆå‘˜æ˜¯ä»€ä¹ˆéƒ½æ²¡ç”¨ã€‚</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">çœŸæ­£å»ä½¿ç”¨çš„æ—¶å€™ï¼š</span><br><span class="line">	å¯¼å‡ºå•ä¸ªæˆå‘˜ï¼š<span class="built_in">exports</span>.xxx = xxx;</span><br><span class="line">	å¯¼å‡ºå¤šä¸ªæˆå‘˜ï¼š<span class="built_in">module</span>.exports æˆ–è€… modeule.exports = &#123;&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•ç”¨æœåŠ¡</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// å¼•ç”¨æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">var</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art-template&#x27;</span>);</span><br><span class="line"><span class="comment">// åˆ›å»ºæœåŠ¡</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer();</span><br><span class="line"><span class="comment">// å…¬å…±è·¯å¾„</span></span><br><span class="line"><span class="keyword">var</span> wwwDir = <span class="string">&#x27;D:/app/www&#x27;</span>;</span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> url = req.url;</span><br><span class="line">    <span class="comment">// è¯»å–æ–‡ä»¶</span></span><br><span class="line">    fs.readFile(<span class="string">&#x27;./template-apche.html&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.end(<span class="string">&#x27;404 Not Found&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        fs.readdir(wwwDir, <span class="function"><span class="keyword">function</span> (<span class="params">err, files</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="keyword">return</span> res.end(<span class="string">&#x27;Can not find www Dir.&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä½¿ç”¨æ¨¡æ¿å¼•æ“è§£ææ›¿æ¢dataä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="comment">// å»xmpTempleteList.htmlä¸­ç¼–å†™æ¨¡æ¿è¯­æ³•</span></span><br><span class="line">            <span class="keyword">var</span> htmlStr = template.render(data.toString(), &#123; </span><br><span class="line">                <span class="attr">title</span>: <span class="string">&#x27;D:/app/www/ çš„ç´¢å¼•&#x27;</span>,</span><br><span class="line">                <span class="attr">files</span>:files </span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">// å‘é€å“åº”æ•°æ®</span></span><br><span class="line">            res.end(htmlStr);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;running....&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>jQueryä¸­çš„each å’Œ åŸç”ŸJavaScriptæ–¹æ³•forEachçš„åŒºåˆ«ï¼š</span><br><span class="line">	æä¾›æºå¤´ï¼š</span><br><span class="line">    	åŸç”Ÿjsæ˜¯es5æä¾›çš„ï¼ˆä¸å…¼å®¹IE8ï¼‰,</span><br><span class="line">        jQueryçš„eachæ˜¯jQueryç¬¬ä¸‰æ–¹åº“æä¾›çš„ï¼ˆå¦‚æœè¦ä½¿ç”¨éœ€è¦ç”¨<span class="number">2</span>ä»¥ä¸‹çš„ç‰ˆæœ¬ä¹Ÿå°±æ˜¯<span class="number">1.</span>ç‰ˆæœ¬ï¼‰,å®ƒçš„eachæ–¹æ³•ä¸»è¦ç”¨æ¥éå†jQueryå®ä¾‹å¯¹è±¡ï¼ˆä¼ªæ•°ç»„ï¼‰,åŒæ—¶ä¹Ÿå¯ä»¥åšä½ç‰ˆæœ¬forEachçš„æ›¿ä»£å“,jQueryçš„å®ä¾‹å¯¹è±¡ä¸èƒ½ä½¿ç”¨forEachæ–¹æ³•ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨å¿…é¡»è½¬ä¸ºæ•°ç»„ï¼ˆ[].slice.call(jQueryå®ä¾‹å¯¹è±¡)ï¼‰æ‰èƒ½ä½¿ç”¨</span><br><span class="line"><span class="number">2.</span>æ¨¡å—ä¸­å¯¼å‡ºå¤šä¸ªæˆå‘˜å’Œå¯¼å‡ºå•ä¸ªæˆå‘˜</span><br><span class="line"><span class="number">3.301</span>å’Œ<span class="number">302</span>çš„åŒºåˆ«ï¼š</span><br><span class="line">	<span class="number">301</span>æ°¸ä¹…é‡å®šå‘,æµè§ˆå™¨ä¼šè®°ä½</span><br><span class="line">    <span class="number">302</span>ä¸´æ—¶é‡å®šå‘</span><br><span class="line"><span class="number">4.</span><span class="built_in">exports</span>å’Œ<span class="built_in">module</span>.exportsçš„åŒºåˆ«:</span><br><span class="line">	æ¯ä¸ªæ¨¡å—ä¸­éƒ½æœ‰ä¸€ä¸ª<span class="built_in">module</span>å¯¹è±¡</span><br><span class="line">    <span class="built_in">module</span>å¯¹è±¡ä¸­æœ‰ä¸€ä¸ª<span class="built_in">exports</span>å¯¹è±¡</span><br><span class="line">    æˆ‘ä»¬å¯ä»¥æŠŠéœ€è¦å¯¼å‡ºçš„æˆå‘˜éƒ½æŒ‚è½½åˆ°<span class="built_in">module</span>.exportsæ¥å£å¯¹è±¡ä¸­</span><br><span class="line">	ä¹Ÿå°±æ˜¯<span class="string">`module.exports.xxx = xxx`</span>çš„æ–¹å¼</span><br><span class="line">    ä½†æ˜¯æ¯æ¬¡å†™å¤ªå¤šäº†å°±å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥Nodeä¸ºäº†ç®€åŒ–ä»£ç ï¼Œå°±åœ¨æ¯ä¸€ä¸ªæ¨¡å—ä¸­éƒ½æä¾›äº†ä¸€ä¸ªæˆå‘˜å«<span class="string">`exports`</span></span><br><span class="line">    <span class="string">`exports === module.exports`</span>ç»“æœä¸º<span class="literal">true</span>,æ‰€ä»¥å®Œå…¨å¯ä»¥<span class="string">`exports.xxx = xxx`</span></span><br><span class="line">    å½“ä¸€ä¸ªæ¨¡å—éœ€è¦å¯¼å‡ºå•ä¸ªæˆå‘˜çš„æ—¶å€™å¿…é¡»ä½¿ç”¨<span class="string">`module.exports = xxx`</span>çš„æ–¹å¼ï¼Œ=,ä½¿ç”¨<span class="string">`exports = xxx`</span>ä¸ç®¡ç”¨,å› ä¸ºæ¯ä¸ªæ¨¡å—æœ€ç»ˆ<span class="keyword">return</span>çš„æ˜¯<span class="built_in">module</span>.exports,è€Œ<span class="built_in">exports</span>åªæ˜¯<span class="built_in">module</span>.exportsçš„ä¸€ä¸ªå¼•ç”¨,æ‰€ä»¥<span class="string">`exports`</span>å³ä½¿é‡æ–°èµ‹å€¼,ä¹Ÿä¸ä¼šå½±å“<span class="string">`module.exports`</span>ã€‚</span><br><span class="line">    æœ‰ä¸€ç§èµ‹å€¼æ–¹å¼æ¯”è¾ƒç‰¹æ®Šï¼š<span class="string">`exports = module.exports`</span>è¿™ä¸ªç”¨æ¥æ–°å»ºç«‹å¼•ç”¨å…³ç³»çš„ã€‚</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h1 id="requireçš„åŠ è½½è§„åˆ™"><a href="#requireçš„åŠ è½½è§„åˆ™" class="headerlink" title="requireçš„åŠ è½½è§„åˆ™"></a>requireçš„åŠ è½½è§„åˆ™</h1><ul>
<li><p>æ ¸å¿ƒæ¨¡å—</p>
<ul>
<li>æ¨¡å—å</li>
</ul>
</li>
<li><p>ç¬¬ä¸‰æ–¹æ¨¡å—</p>
<ul>
<li>æ¨¡å—å</li>
</ul>
</li>
<li><p>ç”¨æˆ·è‡ªå·±å†™çš„</p>
<ul>
<li>è·¯å¾„</li>
</ul>
</li>
</ul>
<h2 id="requireçš„åŠ è½½è§„åˆ™ï¼š"><a href="#requireçš„åŠ è½½è§„åˆ™ï¼š" class="headerlink" title="requireçš„åŠ è½½è§„åˆ™ï¼š"></a>requireçš„åŠ è½½è§„åˆ™ï¼š</h2><ul>
<li><p>ä¼˜å…ˆä»ç¼“å­˜åŠ è½½</p>
</li>
<li><p>åˆ¤æ–­æ¨¡å—æ ‡è¯†ç¬¦</p>
<ul>
<li>æ ¸å¿ƒæ¨¡å—</li>
<li>è‡ªå·±å†™çš„æ¨¡å—ï¼ˆè·¯å¾„å½¢å¼çš„æ¨¡å—ï¼‰</li>
<li>ç¬¬ä¸‰æ–¹æ¨¡å—ï¼ˆnode_modulesï¼‰<ul>
<li>ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ ‡è¯†å°±æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—çš„åç§°ï¼ˆä¸å¯èƒ½æœ‰ç¬¬ä¸‰æ–¹æ¨¡å—å’Œæ ¸å¿ƒæ¨¡å—çš„åå­—ä¸€è‡´ï¼‰</li>
<li>npm<ul>
<li>å¼€å‘äººå‘˜å¯ä»¥æŠŠå†™å¥½çš„æ¡†æ¶åº“å‘å¸ƒåˆ°npmä¸Š</li>
<li>ä½¿ç”¨è€…é€šè¿‡npmå‘½ä»¤æ¥ä¸‹è½½</li>
</ul>
</li>
<li>ä½¿ç”¨æ–¹å¼ï¼š<code>var åç§° = require(&#39;npm installã€ä¸‹è½½åŒ…ã€‘ çš„åŒ…å&#39;)</code><ul>
<li>node_modules/express/package.json main</li>
<li>å¦‚æœpackage.jsonæˆ–è€…mainä¸æˆç«‹ï¼Œåˆ™æŸ¥æ‰¾è¢«é€‰æ‹©é¡¹ï¼šindex.js</li>
<li>å¦‚æœä»¥ä¸Šæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™ç»§ç»­è¿›å…¥ä¸Šä¸€çº§ç›®å½•ä¸­çš„node_modulesæŒ‰ç…§ä¸Šé¢çš„è§„åˆ™ä¾æ¬¡æŸ¥æ‰¾ï¼Œç›´åˆ°å½“å‰æ–‡ä»¶æ‰€å±æ­¤ç›˜æ ¹ç›®å½•éƒ½æ‰¾ä¸åˆ°æœ€åæŠ¥é”™</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœéè·¯å¾„å½¢å¼çš„æ ‡è¯†</span></span><br><span class="line"><span class="comment">// è·¯å¾„å½¢å¼çš„æ ‡è¯†ï¼š</span></span><br><span class="line">    <span class="comment">// ./  å½“å‰ç›®å½• ä¸å¯çœç•¥</span></span><br><span class="line">    <span class="comment">// ../  ä¸Šä¸€çº§ç›®å½•  ä¸å¯çœç•¥</span></span><br><span class="line">    <span class="comment">//  /xxxä¹Ÿå°±æ˜¯D:/xxx</span></span><br><span class="line">    <span class="comment">// å¸¦æœ‰ç»å¯¹è·¯å¾„å‡ ä¹ä¸ç”¨ï¼ˆD:/a/foo.jsï¼‰</span></span><br><span class="line"><span class="comment">// é¦–ä½è¡¨ç¤ºçš„æ˜¯å½“å‰æ–‡ä»¶æ¨¡å—æ‰€å±ç£ç›˜æ ¹ç›®å½•</span></span><br><span class="line"><span class="comment">// require(&#x27;./a&#x27;); </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¸å¿ƒæ¨¡å—</span></span><br><span class="line"><span class="comment">// æ ¸å¿ƒæ¨¡å—æœ¬è´¨ä¹Ÿæ˜¯æ–‡ä»¶ï¼Œæ ¸å¿ƒæ¨¡å—æ–‡ä»¶å·²ç»è¢«ç¼–è¯‘åˆ°äº†äºŒè¿›åˆ¶æ–‡ä»¶ä¸­äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§åå­—æ¥åŠ è½½å°±å¯ä»¥äº†</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰æ–¹æ¨¡å—</span></span><br><span class="line"><span class="comment">// å‡¡æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½å¿…é¡»é€šè¿‡npmä¸‹è½½ï¼ˆnpm i node_modulesï¼‰ï¼Œä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡require(&#x27;åŒ…å&#x27;)æ¥åŠ è½½æ‰å¯ä»¥ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰æ–¹åŒ…çš„åå­—ä¸å¯èƒ½å’Œæ ¸å¿ƒæ¨¡å—çš„åå­—æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="comment">// æ—¢ä¸æ˜¯æ ¸å¿ƒæ¨¡å—ï¼Œä¹Ÿä¸æ˜¯è·¯å¾„å½¢å¼çš„æ¨¡å—</span></span><br><span class="line"><span class="comment">//      å…ˆæ‰¾åˆ°å½“å‰æ–‡æ‰€è¿°ç›®å½•çš„node_modules</span></span><br><span class="line"><span class="comment">//      ç„¶åæ‰¾node_modules/art-templateç›®å½•</span></span><br><span class="line"><span class="comment">//      node_modules/art-template/package.json</span></span><br><span class="line"><span class="comment">//      node_modules/art-template/package.jsonä¸­çš„mainå±æ€§</span></span><br><span class="line"><span class="comment">//      mainå±æ€§è®°å½•äº†art-templateçš„å…¥å£æ¨¡å—</span></span><br><span class="line"><span class="comment">//      ç„¶ååŠ è½½ä½¿ç”¨è¿™ä¸ªç¬¬ä¸‰æ–¹åŒ…</span></span><br><span class="line"><span class="comment">//      å®é™…ä¸Šæœ€ç»ˆåŠ è½½çš„è¿˜æ˜¯æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//      å¦‚æœpackage.jsonä¸å­˜åœ¨æˆ–è€…mianæŒ‡å®šçš„å…¥å£æ¨¡å—ä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">//      åˆ™nodeä¼šè‡ªåŠ¨æ‰¾è¯¥ç›®å½•ä¸‹çš„index.js</span></span><br><span class="line"><span class="comment">//      ä¹Ÿå°±æ˜¯è¯´index.jsæ˜¯ä¸€ä¸ªå¤‡é€‰é¡¹ï¼Œå¦‚æœmainæ²¡æœ‰æŒ‡å®šï¼Œåˆ™åŠ è½½index.jsæ–‡ä»¶</span></span><br><span class="line"><span class="comment">//      </span></span><br><span class="line">        <span class="comment">// å¦‚æœæ¡ä»¶éƒ½ä¸æ»¡è¶³åˆ™ä¼šè¿›å…¥ä¸Šä¸€çº§ç›®å½•è¿›è¡ŒæŸ¥æ‰¾</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šä¸€ä¸ªé¡¹ç›®åªæœ‰ä¸€ä¸ªnode_modulesï¼Œæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œå­ç›®å½•å¯ä»¥ç›´æ¥è°ƒç”¨æ ¹ç›®å½•çš„æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">var</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art-template&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡å—æ ‡è¯†ç¬¦ä¸­çš„-å’Œæ–‡ä»¶æ“ä½œè·¯å¾„ä¸­çš„"><a href="#æ¨¡å—æ ‡è¯†ç¬¦ä¸­çš„-å’Œæ–‡ä»¶æ“ä½œè·¯å¾„ä¸­çš„" class="headerlink" title="æ¨¡å—æ ‡è¯†ç¬¦ä¸­çš„/å’Œæ–‡ä»¶æ“ä½œè·¯å¾„ä¸­çš„/"></a>æ¨¡å—æ ‡è¯†ç¬¦ä¸­çš„<code>/</code>å’Œæ–‡ä»¶æ“ä½œè·¯å¾„ä¸­çš„<code>/</code></h2><p>æ–‡ä»¶æ“ä½œè·¯å¾„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å’±ä»¬æ‰€ä½¿ç”¨çš„æ‰€æœ‰æ–‡ä»¶æ“ä½œçš„APIéƒ½æ˜¯å¼‚æ­¥çš„</span></span><br><span class="line"><span class="comment">// å°±åƒajaxè¯·æ±‚ä¸€æ ·</span></span><br><span class="line"><span class="comment">// è¯»å–æ–‡ä»¶</span></span><br><span class="line"><span class="comment">// æ–‡ä»¶æ“ä½œä¸­ ./ ç›¸å½“äºå½“å‰æ¨¡å—æ‰€å¤„ç£ç›˜æ ¹ç›®å½•</span></span><br><span class="line"><span class="comment">// ./index.txt    ç›¸å¯¹äºå½“å‰ç›®å½•</span></span><br><span class="line"><span class="comment">// /index.txt    ç›¸å¯¹äºå½“å‰ç›®å½•</span></span><br><span class="line"><span class="comment">// /index.txt   ç»å¯¹è·¯å¾„,å½“å‰æ–‡ä»¶æ¨¡å—æ‰€å¤„æ ¹ç›®å½•</span></span><br><span class="line"><span class="comment">// d:express/index.txt   ç»å¯¹è·¯å¾„</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./index.txt&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">       <span class="keyword">return</span>  <span class="built_in">console</span>.log(<span class="string">&#x27;è¯»å–å¤±è´¥&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æ¨¡å—æ“ä½œè·¯å¾„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨æ¨¡å—åŠ è½½ä¸­ï¼Œç›¸å¯¹è·¯å¾„ä¸­çš„./ä¸èƒ½çœç•¥</span></span><br><span class="line"><span class="comment">// è¿™é‡Œçœç•¥äº†.ä¹Ÿæ˜¯ç£ç›˜æ ¹ç›®å½•</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./index&#x27;</span>)(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h1 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h1><ul>
<li>node package manage(nodeåŒ…ç®¡ç†å™¨)</li>
<li>é€šè¿‡npmå‘½ä»¤å®‰è£…jQueryåŒ…ï¼ˆnpm install â€“save jqueryï¼‰ï¼Œåœ¨å®‰è£…æ—¶åŠ ä¸Šâ€“saveä¼šä¸»åŠ¨ç”Ÿæˆè¯´æ˜ä¹¦æ–‡ä»¶ä¿¡æ¯ï¼ˆå°†å®‰è£…æ–‡ä»¶çš„ä¿¡æ¯æ·»åŠ åˆ°package.jsoné‡Œé¢ï¼‰</li>
</ul>
<h3 id="npmç½‘ç«™"><a href="#npmç½‘ç«™" class="headerlink" title="npmç½‘ç«™"></a>npmç½‘ç«™</h3><blockquote>
<p>â€‹    npmjs.com    ç½‘ç«™   æ˜¯ç”¨æ¥æœç´¢npmåŒ…çš„</p>
</blockquote>
<h3 id="npmå‘½ä»¤è¡Œå·¥å…·"><a href="#npmå‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="npmå‘½ä»¤è¡Œå·¥å…·"></a>npmå‘½ä»¤è¡Œå·¥å…·</h3><p>npmæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œåªè¦å®‰è£…äº†nodeå°±å·²ç»å®‰è£…äº†npmã€‚</p>
<p>npmä¹Ÿæœ‰ç‰ˆæœ¬æ¦‚å¿µï¼Œå¯ä»¥é€šè¿‡<code>npm --version</code>æ¥æŸ¥çœ‹npmçš„ç‰ˆæœ¬</p>
<p>å‡çº§npm(è‡ªå·±å‡çº§è‡ªå·±)ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --<span class="built_in">global</span> npm</span><br></pre></td></tr></table></figure>

<h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><ul>
<li>npm init(ç”Ÿæˆpackage.jsonè¯´æ˜ä¹¦æ–‡ä»¶)<ul>
<li>npm init -y(å¯ä»¥è·³è¿‡å‘å¯¼ï¼Œå¿«é€Ÿç”Ÿæˆ)</li>
</ul>
</li>
<li>npm install<ul>
<li>ä¸€æ¬¡æ€§æŠŠdependenciesé€‰é¡¹ä¸­çš„ä¾èµ–é¡¹å…¨éƒ¨å®‰è£…</li>
<li>ç®€å†™ï¼ˆnpm iï¼‰</li>
</ul>
</li>
<li>npm install åŒ…å<ul>
<li>åªä¸‹è½½</li>
<li>ç®€å†™ï¼ˆnpm i åŒ…åï¼‰</li>
</ul>
</li>
<li>npm install â€“save åŒ…å<ul>
<li>ä¸‹è½½å¹¶ä¸”ä¿å­˜ä¾èµ–é¡¹ï¼ˆpackage.jsonæ–‡ä»¶ä¸­çš„dependenciesé€‰é¡¹ï¼‰</li>
<li>ç®€å†™ï¼ˆnpm i  åŒ…åï¼‰</li>
</ul>
</li>
<li>npm uninstall åŒ…å<ul>
<li>åªåˆ é™¤ï¼Œå¦‚æœæœ‰ä¾èµ–é¡¹ä¼šä¾ç„¶ä¿å­˜</li>
<li>ç®€å†™ï¼ˆnpm un åŒ…åï¼‰</li>
</ul>
</li>
<li>npm uninstall â€“save åŒ…å<ul>
<li>åˆ é™¤çš„åŒæ—¶ä¹Ÿä¼šæŠŠä¾èµ–ä¿¡æ¯å…¨éƒ¨åˆ é™¤</li>
<li>ç®€å†™ï¼ˆnpm un åŒ…åï¼‰</li>
</ul>
</li>
<li>npm help<ul>
<li>æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©</li>
</ul>
</li>
<li>npm å‘½ä»¤ â€“help<ul>
<li>æŸ¥çœ‹å…·ä½“å‘½ä»¤çš„ä½¿ç”¨å¸®åŠ©ï¼ˆnpm uninstall â€“helpï¼‰</li>
</ul>
</li>
</ul>
<h3 id="è§£å†³npmè¢«å¢™é—®é¢˜"><a href="#è§£å†³npmè¢«å¢™é—®é¢˜" class="headerlink" title="è§£å†³npmè¢«å¢™é—®é¢˜"></a>è§£å†³npmè¢«å¢™é—®é¢˜</h3><p>npmå­˜å‚¨åŒ…æ–‡ä»¶çš„æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œæœ‰æ—¶å€™ä¼šè¢«å¢™ï¼Œé€Ÿåº¦å¾ˆæ…¢ï¼Œæ‰€ä»¥éœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/mirror/NPM?from=tnpm%E6%B7%98%E5%AE%9D%E7%9A%84%E5%BC%80%E5%8F%91%E5%9B%A2%E9%98%9F%E6%8A%8Anpm%E5%9C%A8%E5%9B%BD%E5%86%85%E5%81%9A%E4%BA%86%E4%B8%80%E4%B8%AA%E9%95%9C%E5%83%8F%EF%BC%88%E4%B9%9F%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E5%A4%87%E4%BB%BD%EF%BC%89%E3%80%82">https://developer.aliyun.com/mirror/NPM?from=tnpmæ·˜å®çš„å¼€å‘å›¢é˜ŸæŠŠnpmåœ¨å›½å†…åšäº†ä¸€ä¸ªé•œåƒï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªå¤‡ä»½ï¼‰ã€‚</a></p>
</blockquote>
<p>å®‰è£…æ·˜å®çš„cnpmï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https:<span class="comment">//registry.npm.taobao.org;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">åœ¨ä»»æ„ç›®å½•æ‰§è¡Œéƒ½å¯ä»¥</span></span><br><span class="line"><span class="meta">#</span><span class="bash">--globalè¡¨ç¤ºå®‰è£…åˆ°å…¨å±€ï¼Œè€Œéå½“å‰ç›®å½•</span></span><br><span class="line"><span class="meta">#</span><span class="bash">--globalä¸èƒ½çœç•¥ï¼Œå¦åˆ™ä¸ç®¡ç”¨</span></span><br><span class="line">npm install --global cnpm</span><br></pre></td></tr></table></figure>

<p>å®‰è£…åŒ…çš„æ—¶å€™æŠŠä»¥å‰çš„<code>npm</code>æ›¿æ¢æˆ<code>cnpm</code>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">èµ°å›½å¤–çš„npmæœåŠ¡å™¨ä¸‹è½½jQueryåŒ…ï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢</span></span><br><span class="line">npm install jQuery;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ä½¿ç”¨cnpmå°±ä¼šé€šè¿‡æ·˜å®çš„æœåŠ¡å™¨æ¥ä¸‹è½½jQuery</span></span><br><span class="line">cnpm install jQuery;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸æƒ³å®‰è£…<code>cnpm</code>åˆæƒ³ä½¿ç”¨æ·˜å®çš„æœåŠ¡å™¨æ¥ä¸‹è½½ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jquery --registry=https://npm.taobao.org;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯æ¯æ¬¡æ‰‹åŠ¨åŠ å‚æ•°å°±å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªé€‰é¡¹åŠ å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://npm.taobao.org;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹npmé…ç½®ä¿¡æ¯</span></span><br><span class="line">npm config list;</span><br></pre></td></tr></table></figure>

<p>åªè¦ç»è¿‡ä¸Šé¢çš„é…ç½®å‘½ä»¤ï¼Œåˆ™ä»¥åæ‰€æœ‰çš„<code>npm install</code>éƒ½ä¼šé€šè¿‡æ·˜å®çš„æœåŠ¡å™¨æ¥ä¸‹è½½</p>
<h1 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h1><p>æ¯ä¸€ä¸ªé¡¹ç›®éƒ½è¦æœ‰ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶ï¼ˆåŒ…æè¿°æ–‡ä»¶ï¼Œå°±åƒäº§å“çš„è¯´æ˜ä¹¦ä¸€æ ·ï¼‰</p>
<p>è¿™ä¸ªæ–‡ä»¶å¯ä»¥é€šè¿‡<code>npm init</code>è‡ªåŠ¨åˆå§‹åŒ–å‡ºæ¥</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">D:\code\nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ&gt;npm init</span><br><span class="line">This utility will walk you through creating a package.json file.</span><br><span class="line">It only covers the most common items, and tries to guess sensible defaults.</span><br><span class="line"></span><br><span class="line">See <span class="string">`npm help json`</span> <span class="keyword">for</span> definitive documentation on these fields</span><br><span class="line">and exactly what they <span class="keyword">do</span>.</span><br><span class="line"></span><br><span class="line">Use <span class="string">`npm install &lt;pkg&gt;`</span> afterwards to install a package and</span><br><span class="line">save it <span class="keyword">as</span> a dependency <span class="keyword">in</span> the package.json file.</span><br><span class="line"></span><br><span class="line">Press ^C at any time to quit.</span><br><span class="line">package name: (nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ)</span><br><span class="line">Sorry, name can only contain URL-friendly characters.</span><br><span class="line">package name: (nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ) cls</span><br><span class="line"><span class="attr">version</span>: (<span class="number">1.0</span><span class="number">.0</span>)</span><br><span class="line"><span class="attr">description</span>: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é¡¹ç›®</span><br><span class="line">entry point: (main.js)</span><br><span class="line">test command:</span><br><span class="line">git repository:</span><br><span class="line">keywords:</span><br><span class="line">author: xiaochen</span><br><span class="line"><span class="attr">license</span>: (ISC)</span><br><span class="line">About to write to D:\code\nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ\package.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;cls&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é¡¹ç›®&quot;</span>,</span><br><span class="line">  <span class="string">&quot;main&quot;</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;author&quot;</span>: <span class="string">&quot;xiaochen&quot;</span>,</span><br><span class="line">  <span class="string">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Is <span class="built_in">this</span> OK? (yes) yes</span><br></pre></td></tr></table></figure>

<p>å¯¹äºç›®å‰æ¥è®²ï¼Œæœ€æœ‰ç”¨çš„æ˜¯<code>dependencies</code>é€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥å¸®åŠ©æˆ‘ä»¬ä¿å­˜ç¬¬ä¸‰æ–¹åŒ…çš„ä¾èµ–ä¿¡æ¯ã€‚</p>
<p>å¦‚æœ<code>node_modules</code>åˆ é™¤äº†ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œåªéœ€è¦åœ¨æ§åˆ¶é¢æ¿ä¸­<code>npm install</code>å°±ä¼šè‡ªåŠ¨æŠŠ<code>package.json</code>ä¸­çš„<code>dependencies</code>ä¸­æ‰€æœ‰çš„ä¾èµ–é¡¹å…¨éƒ¨éƒ½ä¸‹è½½å›æ¥ã€‚</p>
<ul>
<li>å»ºè®®æ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹éƒ½æœ‰ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶</li>
<li>å»ºè®®æ‰§è¡Œ<code>npm install åŒ…å</code>çš„æ—¶å€™éƒ½åŠ ä¸Š<code>--save</code>é€‰é¡¹ï¼Œç›®çš„æ˜¯ç”¨æ¥ä¿å­˜ä¾èµ–ä¿¡æ¯</li>
</ul>
<h2 id="package-jsonå’Œpackage-lock-json"><a href="#package-jsonå’Œpackage-lock-json" class="headerlink" title="package.jsonå’Œpackage-lock.json"></a>package.jsonå’Œpackage-lock.json</h2><p>npm 5ä»¥å‰æ˜¯ä¸ä¼šæœ‰<code>package-lock.json</code>è¿™ä¸ªæ–‡ä»¶</p>
<p>npm5ä»¥åæ‰åŠ å…¥è¿™ä¸ªæ–‡ä»¶</p>
<p>å½“ä½ å®‰è£…åŒ…çš„æ—¶å€™ï¼Œnpméƒ½ä¼šç”Ÿæˆæˆ–è€…æ›´æ–°<code>package-lock.json</code>è¿™ä¸ªæ–‡ä»¶</p>
<ul>
<li>npm5ä»¥åçš„ç‰ˆæœ¬å®‰è£…éƒ½ä¸è¦åŠ <code>--save</code>å‚æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨ä¿å­˜ä¾èµ–ä¿¡æ¯</li>
<li>å½“ä½ å®‰è£…åŒ…çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæˆ–è€…æ›´æ–°<code>package-lock.json</code>æ–‡ä»¶</li>
<li><code>package-lock.json</code>è¿™ä¸ªæ–‡ä»¶ä¼šåŒ…å«<code>node_modules</code>ä¸­æ‰€æœ‰åŒ…çš„ä¿¡æ¯ï¼ˆç‰ˆæœ¬ï¼Œä¸‹è½½åœ°å€ã€‚ã€‚ã€‚ï¼‰<ul>
<li>è¿™æ ·çš„è¯é‡æ–°<code>npm install</code>çš„æ—¶å€™é€Ÿåº¦å°±å¯ä»¥æå‡</li>
</ul>
</li>
<li>ä»æ–‡ä»¶æ¥çœ‹ï¼Œæœ‰ä¸€ä¸ª<code>lock</code>ç§°ä¹‹ä¸ºé”<ul>
<li>è¿™ä¸ª<code>lock</code>ä½¿ç”¨æ¥é”ç‰ˆæœ¬çš„</li>
<li>å¦‚æœé¡¹ç›®ä¾èµ–äº†<code>1.1.1</code>ç‰ˆæœ¬</li>
<li>å¦‚æœä½ é‡æ–°installå…¶å®ä¼šä¸‹è½½æœ€ç»†ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯<code>1.1.1</code></li>
<li><code>package-lock.json</code>çš„å¦å¤–ä¸€ä¸ªä½œç”¨å°±æ˜¯é”å®šç‰ˆæœ¬å·ï¼Œé˜²æ­¢è‡ªåŠ¨å‡çº§</li>
</ul>
</li>
</ul>
<h2 id="pathè·¯å¾„æ“ä½œæ¨¡å—"><a href="#pathè·¯å¾„æ“ä½œæ¨¡å—" class="headerlink" title="pathè·¯å¾„æ“ä½œæ¨¡å—"></a>pathè·¯å¾„æ“ä½œæ¨¡å—</h2><blockquote>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://nodejs.org/docs/latest-v13.x/api/path.html">https://nodejs.org/docs/latest-v13.x/api/path.html</a></p>
</blockquote>
<ul>
<li>path.basenameï¼šè·å–è·¯å¾„çš„æ–‡ä»¶åï¼Œé»˜è®¤åŒ…å«æ‰©å±•å</li>
<li>path.dirnameï¼šè·å–è·¯å¾„ä¸­çš„ç›®å½•éƒ¨åˆ†</li>
<li>path.extnameï¼šè·å–ä¸€ä¸ªè·¯å¾„ä¸­çš„æ‰©å±•åéƒ¨åˆ†</li>
<li>path.parseï¼šæŠŠè·¯å¾„è½¬æ¢ä¸ºå¯¹è±¡<ul>
<li>rootï¼šæ ¹è·¯å¾„</li>
<li>dirï¼šç›®å½•</li>
<li>baseï¼šåŒ…å«åç¼€åçš„æ–‡ä»¶å</li>
<li>extï¼šåç¼€å</li>
<li>nameï¼šä¸åŒ…å«åç¼€åçš„æ–‡ä»¶å</li>
</ul>
</li>
<li>path.joinï¼šæ‹¼æ¥è·¯å¾„</li>
<li>path.isAbsoluteï¼šåˆ¤æ–­ä¸€ä¸ªè·¯å¾„æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„<img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200315150610001.png" alt="image-20200315150610001"></li>
</ul>
<h1 id="Nodeä¸­çš„å…¶å®ƒæˆå‘˜-dirname-filename"><a href="#Nodeä¸­çš„å…¶å®ƒæˆå‘˜-dirname-filename" class="headerlink" title="Nodeä¸­çš„å…¶å®ƒæˆå‘˜(__dirname,__filename)"></a>Nodeä¸­çš„å…¶å®ƒæˆå‘˜(__dirname,__filename)</h1><p>åœ¨æ¯ä¸ªæ¨¡å—ä¸­ï¼Œé™¤äº†<code>require</code>,<code>exports</code>ç­‰æ¨¡å—ç›¸å…³çš„APIä¹‹å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„æˆå‘˜ï¼š</p>
<ul>
<li><p><code>__dirname</code>ï¼Œæ˜¯ä¸€ä¸ªæˆå‘˜ï¼Œå¯ä»¥ç”¨æ¥<strong>åŠ¨æ€</strong>è·å–å½“å‰æ–‡ä»¶æ¨¡å—æ‰€å±ç›®å½•çš„ç»å¯¹è·¯å¾„</p>
</li>
<li><p><code>__filename</code>ï¼Œå¯ä»¥ç”¨æ¥<strong>åŠ¨æ€</strong>è·å–å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼ˆåŒ…å«æ–‡ä»¶åï¼‰</p>
</li>
<li><p><code>__dirname</code>å’Œ<code>filename</code>æ˜¯ä¸å—æ‰§è¡Œnodeå‘½ä»¤æ‰€å±è·¯å¾„å½±å“çš„</p>
<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200315151551873.png" alt="image-20200315151551873"></p>
</li>
</ul>
<p>åœ¨æ–‡ä»¶æ“ä½œä¸­ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ˜¯ä¸å¯é çš„ï¼Œå› ä¸ºnodeä¸­æ–‡ä»¶æ“ä½œçš„è·¯å¾„è¢«è®¾è®¡ä¸ºç›¸å¯¹äºæ‰§è¡Œnodeå‘½ä»¤æ‰€å¤„çš„è·¯å¾„ã€‚</p>
<p>æ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€è¦æŠŠç›¸å¯¹è·¯å¾„å˜ä¸ºç»å¯¹è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ä¸å—ä»»ä½•å½±å“ï¼‰å°±å¯ä»¥äº†ã€‚</p>
<p>å°±å¯ä»¥ä½¿ç”¨<code>__dirname</code>æˆ–è€…<code>__filename</code>æ¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜</p>
<p>åœ¨æ‹¼æ¥è·¯å¾„çš„è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†é¿å…æ‰‹åŠ¨æ‹¼æ¥å¸¦æ¥çš„ä¸€äº›ä½çº§é”™è¯¯ï¼Œæ¨èä½¿ç”¨<code>path.join()</code>æ¥è¾…åŠ©æ‹¼æ¥</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(__dirname + &#x27;a.txt&#x27;);</span></span><br><span class="line"><span class="comment">// path.joinæ–¹æ³•ä¼šå°†æ–‡ä»¶æ“ä½œä¸­çš„ç›¸å¯¹è·¯å¾„éƒ½ç»Ÿä¸€çš„è½¬ä¸ºåŠ¨æ€çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">fs.readFile(path.join(__dirname + <span class="string">&#x27;/a.txt&#x27;</span>),<span class="string">&#x27;utf8&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err)&#123;</span><br><span class="line">		<span class="keyword">throw</span> err</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¡¥å……ï¼šæ¨¡å—ä¸­çš„è·¯å¾„æ ‡è¯†å’Œè¿™é‡Œçš„è·¯å¾„æ²¡å…³ç³»ï¼Œä¸å—å½±å“ï¼ˆå°±æ˜¯ç›¸å¯¹äºæ–‡ä»¶æ¨¡å—ï¼‰</p>
</blockquote>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p><strong>æ¨¡å—ä¸­çš„è·¯å¾„æ ‡è¯†å’Œæ–‡ä»¶æ“ä½œä¸­çš„ç›¸å¯¹è·¯å¾„æ ‡è¯†ä¸ä¸€è‡´</strong></p>
<p><strong>æ¨¡å—ä¸­çš„è·¯å¾„æ ‡è¯†å°±æ˜¯ç›¸å¯¹äºå½“å‰æ–‡ä»¶æ¨¡å—ï¼Œä¸å—nodeå‘½ä»¤æ‰€å¤„è·¯å¾„å½±å“</strong></p>
</blockquote>
<h1 id="Expressï¼ˆå¿«é€Ÿçš„ï¼‰"><a href="#Expressï¼ˆå¿«é€Ÿçš„ï¼‰" class="headerlink" title="Expressï¼ˆå¿«é€Ÿçš„ï¼‰"></a>Expressï¼ˆå¿«é€Ÿçš„ï¼‰</h1><p>ä½œè€…ï¼šTj</p>
<p>åŸç”Ÿçš„httpåœ¨æŸäº›æ–¹é¢è¡¨ç°ä¸è¶³ä»¥åº”å¯¹æˆ‘ä»¬çš„å¼€å‘éœ€æ±‚ï¼Œæ‰€ä»¥å°±éœ€è¦ä½¿ç”¨æ¡†æ¶æ¥åŠ å¿«æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œæ¡†æ¶çš„ç›®çš„å°±æ˜¯æé«˜æ•ˆç‡ï¼Œè®©æˆ‘ä»¬çš„ä»£ç é«˜åº¦ç»Ÿä¸€ã€‚</p>
<p>åœ¨nodeä¸­æœ‰å¾ˆå¤šwebå¼€å‘æ¡†æ¶ã€‚ä¸»è¦å­¦ä¹ express</p>
<ul>
<li><p><code>http://expressjs.com/</code>,å…¶ä¸­ä¸»è¦å°è£…çš„æ˜¯httpã€‚</p>
</li>
<li><p>```javascript<br>// 1 å®‰è£…<br>// 2 å¼•åŒ…<br>var express = require(â€˜expressâ€™);<br>// 3 åˆ›å»ºæœåŠ¡å™¨åº”ç”¨ç¨‹åº<br>//      ä¹Ÿå°±æ˜¯åŸæ¥çš„http.createServer();<br>var app = express();</p>
<p>// å…¬å¼€æŒ‡å®šç›®å½•<br>// åªè¦é€šè¿‡è¿™æ ·åšäº†ï¼Œå°±å¯ä»¥é€šè¿‡/public/xxçš„æ–¹å¼æ¥è®¿é—®publicç›®å½•ä¸­çš„æ‰€æœ‰èµ„æº<br>// åœ¨Expressä¸­å¼€æ”¾èµ„æºå°±æ˜¯ä¸€ä¸ªAPIçš„äº‹<br>app.use(â€˜/public/â€˜,express.static(â€˜/public/â€˜));</p>
<p>//æ¨¡æ¿å¼•æ“åœ¨Expressä¸­å¼€æ”¾æ¨¡æ¿ä¹Ÿæ˜¯ä¸€ä¸ªAPIçš„äº‹</p>
<p>// å½“æœåŠ¡å™¨æ”¶åˆ°getè¯·æ±‚ / çš„æ—¶å€™ï¼Œæ‰§è¡Œå›è°ƒå¤„ç†å‡½æ•°<br>app.get(â€˜/â€˜,function(req,res){</p>
<pre><code>res.send(&#39;hello express&#39;);
</code></pre>
<p>})</p>
<p>// ç›¸å½“äºserver.listen<br>app.listen(3000,function(){</p>
<pre><code>console.log(&#39;app is runing at port 3000&#39;);
</code></pre>
<p>})</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">### å­¦ä¹ Express</span><br><span class="line"></span><br><span class="line">#### èµ·æ­¥</span><br><span class="line"></span><br><span class="line">##### å®‰è£…ï¼š![image-20200310123723079](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20200310123723079.png)</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">cnpm install express</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world:"></a>hello world:<img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200310124850557.png" alt="image-20200310124850557"></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥express</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. åˆ›å»ºapp</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">//  2. </span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 1</span></span><br><span class="line">    <span class="comment">// res.write(&#x27;Hello&#x27;);</span></span><br><span class="line">    <span class="comment">// res.write(&#x27;World&#x27;);</span></span><br><span class="line">    <span class="comment">// res.end()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2</span></span><br><span class="line">    <span class="comment">// res.end(&#x27;hello world&#x27;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3</span></span><br><span class="line">    res.send(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;express app is runing...&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="åŸºæœ¬è·¯ç”±"><a href="#åŸºæœ¬è·¯ç”±" class="headerlink" title="åŸºæœ¬è·¯ç”±"></a>åŸºæœ¬è·¯ç”±</h5><p>è·¯ç”±ï¼š</p>
<ul>
<li><p>è¯·æ±‚æ–¹æ³•</p>
</li>
<li><p>è¯·æ±‚è·¯å¾„</p>
</li>
<li><p>è¯·æ±‚å¤„ç†å‡½æ•°</p>
</li>
</ul>
<p>get:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å½“ä½ ä»¥getæ–¹æ³•è¯·æ±‚/çš„æ—¶å€™ï¼Œæ‰§è¡Œå¯¹åº”çš„å¤„ç†å‡½æ•°</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>post:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å½“ä½ ä»¥postæ–¹æ³•è¯·æ±‚/çš„æ—¶å€™ï¼Œæ‰§è¡Œå¯¹åº”çš„å¤„ç†å‡½æ•°</span></span><br><span class="line">app.post(<span class="string">&#x27;/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="Expressé™æ€æœåŠ¡API"><a href="#Expressé™æ€æœåŠ¡API" class="headerlink" title="Expressé™æ€æœåŠ¡API"></a>Expressé™æ€æœåŠ¡API</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.useä¸ä»…ä»…æ˜¯ç”¨æ¥å¤„ç†é™æ€èµ„æºçš„ï¼Œè¿˜å¯ä»¥åšå¾ˆå¤šå·¥ä½œ(body-parserçš„é…ç½®)</span></span><br><span class="line">app.use(express.static(<span class="string">&#x27;public&#x27;</span>));</span><br><span class="line"></span><br><span class="line">app.use(express.static(<span class="string">&#x27;files&#x27;</span>));</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&#x27;/stataic&#x27;</span>,express.static(<span class="string">&#x27;public&#x27;</span>));</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥express</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºapp</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€æ”¾é™æ€èµ„æº</span></span><br><span class="line"><span class="comment">// 1.å½“ä»¥/public/å¼€å¤´çš„æ—¶å€™ï¼Œå»./public/ç›®å½•ä¸­æ‰¾å¯¹åº”èµ„æº</span></span><br><span class="line"><span class="comment">// è®¿é—®ï¼šhttp://127.0.0.1:3000/public/login.html</span></span><br><span class="line">app.use(<span class="string">&#x27;/public/&#x27;</span>,express.static(<span class="string">&#x27;./public/&#x27;</span>)); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.å½“çœç•¥ç¬¬ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡çœç•¥/publicçš„æ–¹å¼æ¥è®¿é—®</span></span><br><span class="line"><span class="comment">// è®¿é—®ï¼šhttp://127.0.0.1:3000/login.html</span></span><br><span class="line"><span class="comment">// app.use(express.static(&#x27;./public/&#x27;));   </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.è®¿é—®ï¼šhttp://127.0.0.1:3000/a/login.html</span></span><br><span class="line"><span class="comment">// aç›¸å½“äºpublicçš„åˆ«å</span></span><br><span class="line"><span class="comment">// app.use(&#x27;/a/&#x27;,express.static(&#x27;./public/&#x27;)); </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  </span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.end(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;express app is runing...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="åœ¨Expressä¸­é…ç½®ä½¿ç”¨art-templeteæ¨¡æ¿å¼•æ“"><a href="#åœ¨Expressä¸­é…ç½®ä½¿ç”¨art-templeteæ¨¡æ¿å¼•æ“" class="headerlink" title="åœ¨Expressä¸­é…ç½®ä½¿ç”¨art-templeteæ¨¡æ¿å¼•æ“"></a>åœ¨Expressä¸­é…ç½®ä½¿ç”¨<code>art-templete</code>æ¨¡æ¿å¼•æ“</h5><ul>
<li><a target="_blank" rel="noopener" href="https://aui.github.io/art-template/">art-templateå®˜æ–¹æ–‡æ¡£</a></li>
<li>åœ¨nodeä¸­ï¼Œæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹æ¨¡æ¿å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ï¼Œä¸æ˜¯åªæœ‰<code>art-template</code><ul>
<li>è¿˜æœ‰ejsï¼Œjadeï¼ˆpugï¼‰ï¼Œhandlebarsï¼Œnunjucks</li>
</ul>
</li>
</ul>
<p>å®‰è£…ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install --save art-template</span><br><span class="line">npm install --save express-art-template</span><br><span class="line"></span><br><span class="line">//ä¸¤ä¸ªä¸€èµ·å®‰è£…</span><br><span class="line">npm i --save art-template express-art-template</span><br></pre></td></tr></table></figure>

<p>é…ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.engine(<span class="string">&#x27;html&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;express-art-template&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// expressé»˜è®¤ä¼šå»viewsç›®å½•æ‰¾index.html</span></span><br><span class="line">    res.render(<span class="string">&#x27;index.html&#x27;</span>,&#123;</span><br><span class="line">           <span class="attr">title</span>:<span class="string">&#x27;hello world&#x27;</span>     </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå¸Œæœ›ä¿®æ”¹é»˜è®¤çš„<code>views</code>è§†å›¾æ¸²æŸ“å­˜å‚¨ç›®å½•ï¼Œå¯ä»¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°viewsåƒä¸‡ä¸è¦å†™é”™</span></span><br><span class="line">app.set(<span class="string">&#x27;views&#x27;</span>,ç›®å½•è·¯å¾„);</span><br></pre></td></tr></table></figure>

<h5 id="åœ¨Expressä¸­è·å–è¡¨å•è¯·æ±‚æ•°æ®"><a href="#åœ¨Expressä¸­è·å–è¡¨å•è¯·æ±‚æ•°æ®" class="headerlink" title="åœ¨Expressä¸­è·å–è¡¨å•è¯·æ±‚æ•°æ®"></a>åœ¨Expressä¸­è·å–è¡¨å•è¯·æ±‚æ•°æ®</h5><h6 id="è·å–getè¯·æ±‚æ•°æ®ï¼š"><a href="#è·å–getè¯·æ±‚æ•°æ®ï¼š" class="headerlink" title="è·å–getè¯·æ±‚æ•°æ®ï¼š"></a>è·å–getè¯·æ±‚æ•°æ®ï¼š</h6><p>Expresså†…ç½®äº†ä¸€ä¸ªapiï¼Œå¯ä»¥ç›´æ¥é€šè¿‡<code>req.query</code>æ¥è·å–æ•°æ®</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡requeryæ–¹æ³•è·å–ç”¨æˆ·è¾“å…¥çš„æ•°æ®</span></span><br><span class="line"><span class="comment">// req.queryåªèƒ½æ‹¿åˆ°getè¯·æ±‚çš„æ•°æ®</span></span><br><span class="line"> <span class="keyword">var</span> comment = req.query;</span><br></pre></td></tr></table></figure>

<h6 id="è·å–postè¯·æ±‚æ•°æ®ï¼š"><a href="#è·å–postè¯·æ±‚æ•°æ®ï¼š" class="headerlink" title="è·å–postè¯·æ±‚æ•°æ®ï¼š"></a>è·å–postè¯·æ±‚æ•°æ®ï¼š</h6><p>åœ¨Expressä¸­æ²¡æœ‰å†…ç½®è·å–è¡¨å•postè¯·æ±‚ä½“çš„apiï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…<code>body-parser</code>æ¥è·å–æ•°æ®ã€‚</p>
<p>å®‰è£…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save body-parser;</span><br></pre></td></tr></table></figure>

<p>é…ç½®ï¼š</p>
<p>// é…ç½®è§£æè¡¨å• POST è¯·æ±‚ä½“æ’ä»¶ï¼ˆæ³¨æ„ï¼šä¸€å®šè¦åœ¨ app.use(router) ä¹‹å‰ ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// å¼•åŒ…</span></span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®body-parser</span></span><br><span class="line"><span class="comment">// åªè¦åŠ å…¥è¿™ä¸ªé…ç½®ï¼Œåˆ™åœ¨reqè¯·æ±‚å¯¹è±¡ä¸Šä¼šå¤šå‡ºæ¥ä¸€ä¸ªå±æ€§ï¼šbody</span></span><br><span class="line"><span class="comment">// ä¹Ÿå°±æ˜¯è¯´å¯ä»¥ç›´æ¥é€šè¿‡req.bodyæ¥è·å–è¡¨å•postè¯·æ±‚æ•°æ®</span></span><br><span class="line"><span class="comment">// parse application/x-www-form-urlencoded</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// parse application/json</span></span><br><span class="line">app.use(bodyParser.json())</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.setHeader(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>)</span><br><span class="line">  res.write(<span class="string">&#x27;you posted:\n&#x27;</span>)</span><br><span class="line">  <span class="comment">// å¯ä»¥é€šè¿‡req.bodyæ¥è·å–è¡¨å•è¯·æ±‚æ•°æ®</span></span><br><span class="line">  res.end(<span class="built_in">JSON</span>.stringify(req.body, <span class="literal">null</span>, <span class="number">2</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="åœ¨Expressä¸­é…ç½®ä½¿ç”¨express-sessionæ’ä»¶æ“ä½œ"><a href="#åœ¨Expressä¸­é…ç½®ä½¿ç”¨express-sessionæ’ä»¶æ“ä½œ" class="headerlink" title="åœ¨Expressä¸­é…ç½®ä½¿ç”¨express-sessionæ’ä»¶æ“ä½œ"></a>åœ¨Expressä¸­é…ç½®ä½¿ç”¨<code>express-session</code>æ’ä»¶æ“ä½œ</h3><blockquote>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://github.com/expressjs/session">https://github.com/expressjs/session</a></p>
</blockquote>
<p>å®‰è£…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express-session</span><br></pre></td></tr></table></figure>

<p>é…ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯¥æ’ä»¶ä¼šä¸ºreqè¯·æ±‚å¯¹è±¡æ·»åŠ ä¸€ä¸ªæˆå‘˜:req.sessioné»˜è®¤æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="comment">//è¿™æ˜¯æœ€ç®€å•çš„é…ç½®æ–¹å¼</span></span><br><span class="line"><span class="comment">//Sessionæ˜¯åŸºäºCookieå®ç°çš„</span></span><br><span class="line">app.use(session(&#123;</span><br><span class="line">  <span class="comment">//é…ç½®åŠ å¯†å­—ç¬¦ä¸²ï¼Œä»–ä¼šåœ¨åŸæœ‰çš„åŸºç¡€ä¸Šå’Œå­—ç¬¦ä¸²æ‹¼æ¥èµ·æ¥å»åŠ å¯†</span></span><br><span class="line">  <span class="comment">//ç›®çš„æ˜¯ä¸ºäº†å¢åŠ å®‰å…¨æ€§ï¼Œé˜²æ­¢å®¢æˆ·ç«¯æ¶æ„ä¼ªé€ </span></span><br><span class="line">  <span class="attr">secret</span>: <span class="string">&#x27;keyboard cat&#x27;</span>,</span><br><span class="line">  <span class="attr">resave</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">saveUninitialized</span>: <span class="literal">true</span>,<span class="comment">//æ— è®ºæ˜¯å¦é€‚ç”¨Sessionï¼Œéƒ½é»˜è®¤ç›´æ¥åˆ†é…ä¸€æŠŠé’¥åŒ™</span></span><br><span class="line">  <span class="attr">cookie</span>: &#123; <span class="attr">secure</span>: <span class="literal">true</span> &#125;</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯»</span></span><br><span class="line"><span class="comment">//æ·»åŠ Sessionæ•°æ®</span></span><br><span class="line"><span class="comment">//sessionå°±æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">req.session.foo = <span class="string">&#x27;bar&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†™</span></span><br><span class="line"><span class="comment">//è·å–sessionæ•°æ®</span></span><br><span class="line">req.session.foo</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ </span></span><br><span class="line">req.session.foo = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">delete</span> req.session.foo</span><br></pre></td></tr></table></figure>

<p>æç¤ºï¼š</p>
<p>é»˜è®¤Sessionæ•°æ®æ—¶å†…å­˜å‚¨æ•°æ®ï¼ŒæœåŠ¡å™¨ä¸€æ—¦é‡å¯ï¼ŒçœŸæ­£çš„ç”Ÿäº§ç¯å¢ƒä¼šæŠŠSessionè¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ã€‚</p>
<h3 id="åˆ©ç”¨Expresså®ç°ADUSé¡¹ç›®"><a href="#åˆ©ç”¨Expresså®ç°ADUSé¡¹ç›®" class="headerlink" title="åˆ©ç”¨Expresså®ç°ADUSé¡¹ç›®"></a>åˆ©ç”¨Expresså®ç°ADUSé¡¹ç›®</h3><h4 id="æ¨¡å—åŒ–æ€æƒ³"><a href="#æ¨¡å—åŒ–æ€æƒ³" class="headerlink" title="æ¨¡å—åŒ–æ€æƒ³"></a>æ¨¡å—åŒ–æ€æƒ³</h4><p>æ¨¡å—å¦‚ä½•åˆ’åˆ†:</p>
<ul>
<li>æ¨¡å—èŒè´£è¦å•ä¸€</li>
</ul>
<p>javascriptæ¨¡å—åŒ–ï¼š</p>
<ul>
<li>Node ä¸­çš„ CommonJS</li>
<li>æµè§ˆå™¨ä¸­çš„ï¼š<ul>
<li>AMD    require.js</li>
<li>CMD     sea.js</li>
</ul>
</li>
<li>es6ä¸­å¢åŠ äº†å®˜æ–¹æ”¯æŒ</li>
</ul>
<h4 id="èµ·æ­¥-1"><a href="#èµ·æ­¥-1" class="headerlink" title="èµ·æ­¥"></a>èµ·æ­¥</h4><ul>
<li>åˆå§‹åŒ–</li>
<li>æ¨¡æ¿å¤„ç†</li>
</ul>
<h4 id="è·¯ç”±è®¾è®¡"><a href="#è·¯ç”±è®¾è®¡" class="headerlink" title="è·¯ç”±è®¾è®¡"></a>è·¯ç”±è®¾è®¡</h4><table>
<thead>
<tr>
<th>è¯·æ±‚æ–¹æ³•</th>
<th align="left">è¯·æ±‚è·¯å¾„</th>
<th align="left">getå‚æ•°</th>
<th>postå‚æ•°</th>
<th align="left">å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td align="left">/students</td>
<td align="left"></td>
<td></td>
<td align="left">æ¸²æŸ“é¦–é¡µ</td>
</tr>
<tr>
<td>GET</td>
<td align="left">/students/new</td>
<td align="left"></td>
<td></td>
<td align="left">æ¸²æŸ“æ·»åŠ å­¦ç”Ÿé¡µé¢</td>
</tr>
<tr>
<td>POST</td>
<td align="left">/students/new</td>
<td align="left"></td>
<td>name,age,gender,hobbies</td>
<td align="left">å¤„ç†æ·»åŠ å­¦ç”Ÿè¯·æ±‚</td>
</tr>
<tr>
<td>GET</td>
<td align="left">/students/edit</td>
<td align="left">id</td>
<td></td>
<td align="left">æ¸²æŸ“ç¼–è¾‘é¡µé¢</td>
</tr>
<tr>
<td>POST</td>
<td align="left">/students/edit</td>
<td align="left"></td>
<td>id,name,age,gender,hobbies</td>
<td align="left">å¤„ç†ç¼–è¾‘è¯·æ±‚</td>
</tr>
<tr>
<td>GET</td>
<td align="left">/students/delete</td>
<td align="left">id</td>
<td></td>
<td align="left">å¤„ç†åˆ é™¤è¯·æ±‚</td>
</tr>
</tbody></table>
<h4 id="æå–è·¯ç”±æ¨¡å—"><a href="#æå–è·¯ç”±æ¨¡å—" class="headerlink" title="æå–è·¯ç”±æ¨¡å—"></a>æå–è·¯ç”±æ¨¡å—</h4><p>router.js:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * router.jsè·¯ç”±æ¨¡å—</span></span><br><span class="line"><span class="comment"> * èŒè´£ï¼š</span></span><br><span class="line"><span class="comment"> *      å¤„ç†è·¯ç”±</span></span><br><span class="line"><span class="comment"> *      æ ¹æ®ä¸åŒçš„è¯·æ±‚æ–¹æ³•+è¯·æ±‚è·¯å¾„è®¾ç½®å…·ä½“çš„è¯·æ±‚å‡½æ•°</span></span><br><span class="line"><span class="comment"> * æ¨¡å—èŒè´£è¦å•ä¸€ï¼Œæˆ‘ä»¬åˆ’åˆ†æ¨¡å—çš„ç›®çš„å°±æ˜¯å¢å¼ºä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œæå‡å¼€å‘æ•ˆç‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Expressä¸“é—¨æä¾›äº†ä¸€ç§æ›´å¥½çš„æ–¹å¼</span></span><br><span class="line"><span class="comment">// ä¸“é—¨ç”¨æ¥æä¾›è·¯ç”±çš„</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">// 1 åˆ›å»ºä¸€ä¸ªè·¯ç”±å®¹å™¨</span></span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"><span class="comment">// 2 æŠŠè·¯ç”±éƒ½æŒ‚è½½åˆ°è·¯ç”±å®¹å™¨ä¸­</span></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// res.send(&#x27;hello world&#x27;);</span></span><br><span class="line">    <span class="comment">// readFileçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œä¼ å…¥utf8å°±æ˜¯å‘Šè¯‰ä»–æŠŠè¯»å–åˆ°çš„æ–‡ä»¶ç›´æ¥æŒ‰ç…§utf8ç¼–ç ï¼Œç›´æ¥è½¬æˆæˆ‘ä»¬è®¤è¯†çš„å­—ç¬¦</span></span><br><span class="line">    <span class="comment">// é™¤äº†è¿™æ ·æ¥è½¬æ¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡data.toStringï¼ˆï¼‰æ¥è½¬æ¢</span></span><br><span class="line">    fs.readFile(<span class="string">&#x27;./db.json&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.status(<span class="number">500</span>).send(<span class="string">&#x27;Server error.&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¯»å–åˆ°çš„æ–‡ä»¶æ•°æ®æ˜¯stringç±»å‹çš„æ•°æ®</span></span><br><span class="line">        <span class="comment">// console.log(data);</span></span><br><span class="line">        <span class="comment">// ä»æ–‡ä»¶ä¸­è¯»å–åˆ°çš„æ•°æ®ä¸€å®šæ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸€å®šè¦æ‰‹åŠ¨è½¬æ¢æˆå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">var</span> students = <span class="built_in">JSON</span>.parse(data).students;</span><br><span class="line">        res.render(<span class="string">&#x27;index.html&#x27;</span>, &#123;</span><br><span class="line">            <span class="comment">// è¯»å–æ–‡ä»¶æ•°æ®</span></span><br><span class="line">            <span class="attr">students</span>:students</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students/new&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.render(<span class="string">&#x27;new.html&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students/edit&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&#x27;/students/edit&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students/delete&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 æŠŠrouterå¯¼å‡º</span></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>app.js:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./router&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// router(app);</span></span><br><span class="line"><span class="comment">// æŠŠè·¯ç”±å®¹å™¨æŒ‚è½½åˆ°appæœåŠ¡ä¸­</span></span><br><span class="line"><span class="comment">// æŒ‚è½½è·¯ç”±</span></span><br><span class="line">app.use(router);</span><br></pre></td></tr></table></figure>



<h4 id="è®¾è®¡æ“ä½œæ•°æ®çš„APIæ–‡ä»¶æ¨¡å—"><a href="#è®¾è®¡æ“ä½œæ•°æ®çš„APIæ–‡ä»¶æ¨¡å—" class="headerlink" title="è®¾è®¡æ“ä½œæ•°æ®çš„APIæ–‡ä»¶æ¨¡å—"></a>è®¾è®¡æ“ä½œæ•°æ®çš„APIæ–‡ä»¶æ¨¡å—</h4><p>es6ä¸­çš„findå’ŒfindIndexï¼š</p>
<p>findæ¥å—ä¸€ä¸ªæ–¹æ³•ä½œä¸ºå‚æ•°ï¼Œæ–¹æ³•å†…éƒ¨è¿”å›ä¸€ä¸ªæ¡ä»¶</p>
<p>findä¼šä¾¿åˆ©æ‰€æœ‰çš„å…ƒç´ ï¼Œæ‰§è¡Œä½ ç»™å®šçš„å¸¦æœ‰æ¡ä»¶è¿”å›å€¼çš„å‡½æ•°</p>
<p>ç¬¦åˆè¯¥æ¡ä»¶çš„å…ƒç´ ä¼šä½œä¸ºfindæ–¹æ³•çš„è¿”å›å€¼</p>
<p>å¦‚æœéå†ç»“æŸè¿˜æ²¡æœ‰ç¬¦åˆè¯¥æ¡ä»¶çš„å…ƒç´ ï¼Œåˆ™è¿”å›undefined<img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200313103810731.png" alt="image-20200313103810731"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * student.js</span></span><br><span class="line"><span class="comment"> * æ•°æ®æ“ä½œæ–‡ä»¶æ¨¡å—</span></span><br><span class="line"><span class="comment"> * èŒè´£ï¼šæ“ä½œæ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œåªå¤„ç†æ•°æ®ï¼Œä¸å…³å¿ƒä¸šåŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * è·å–æ‰€æœ‰å­¦ç”Ÿåˆ—è¡¨</span></span><br><span class="line"><span class="comment">  * return []</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="built_in">exports</span>.find = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * è·å–æ·»åŠ ä¿å­˜å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="built_in">exports</span>.save = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›´æ–°å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.update = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.delete = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h4><ul>
<li><p>å¤„ç†æ¨¡æ¿</p>
</li>
<li><p>é…ç½®é™æ€å¼€æ”¾èµ„æº</p>
</li>
<li><p>é…ç½®æ¨¡æ¿å¼•æ“</p>
</li>
<li><p>ç®€å•çš„è·¯ç”±ï¼Œ/studensæ¸²æŸ“é™æ€é¡µå‡ºæ¥</p>
</li>
<li><p>è·¯ç”±è®¾è®¡</p>
</li>
<li><p>æå–è·¯ç”±æ¨¡å—</p>
</li>
<li><p>ç”±äºæ¥ä¸‹æ¥çš„ä¸€ç³»åˆ—ä¸šåŠ¡æ“ä½œéƒ½éœ€è¦å¤„ç†æ–‡ä»¶æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°è£…Student.jsâ€™</p>
</li>
<li><p>å…ˆå†™å¥½student.jsæ–‡ä»¶ç»“æ„</p>
<ul>
<li>æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿåˆ—åˆ«å“¦çš„API</li>
<li>findById</li>
<li>save</li>
<li>updateById</li>
<li>deleteById</li>
</ul>
</li>
<li><p>å®ç°å…·ä½“åŠŸèƒ½</p>
<ul>
<li>é€šè¿‡è·¯ç”±æ”¶åˆ°è¯·æ±‚</li>
<li>æ¥å—è¯·æ±‚ä¸­çš„å‚æ•°ï¼ˆgetï¼Œpostï¼‰<ul>
<li>req.query</li>
<li>req.body</li>
</ul>
</li>
<li>è°ƒç”¨æ•°æ®æ“ä½œAPIå¤„ç†æ•°æ®</li>
<li>æ ¹æ®æ“ä½œç»“æœç»™å®¢æˆ·ç«¯å‘é€è¯·æ±‚</li>
</ul>
</li>
<li><p>ä¸šåŠ¡åŠŸèƒ½é¡ºåº</p>
<ul>
<li>åˆ—è¡¨</li>
<li>æ·»åŠ </li>
<li>ç¼–è¾‘</li>
<li>åˆ é™¤</li>
</ul>
</li>
</ul>
<h4 id="å­æ¨¡æ¿å’Œæ¨¡æ¿çš„ç»§æ‰¿ï¼ˆæ¨¡æ¿å¼•æ“é«˜çº§è¯­æ³•ï¼‰ã€includeï¼Œextendï¼Œblockã€‘"><a href="#å­æ¨¡æ¿å’Œæ¨¡æ¿çš„ç»§æ‰¿ï¼ˆæ¨¡æ¿å¼•æ“é«˜çº§è¯­æ³•ï¼‰ã€includeï¼Œextendï¼Œblockã€‘" class="headerlink" title="å­æ¨¡æ¿å’Œæ¨¡æ¿çš„ç»§æ‰¿ï¼ˆæ¨¡æ¿å¼•æ“é«˜çº§è¯­æ³•ï¼‰ã€includeï¼Œextendï¼Œblockã€‘"></a>å­æ¨¡æ¿å’Œæ¨¡æ¿çš„ç»§æ‰¿ï¼ˆæ¨¡æ¿å¼•æ“é«˜çº§è¯­æ³•ï¼‰ã€includeï¼Œextendï¼Œblockã€‘</h4><p>æ³¨æ„:</p>
<p>æ¨¡æ¿é¡µï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">	&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">	&lt;title&gt;æ¨¡æ¿é¡µ&lt;/title&gt;</span><br><span class="line">	&lt;link rel=&quot;stylesheet&quot; href=&quot;/node_modules/bootstrap/dist/css/bootstrap.css&quot;/&gt;</span><br><span class="line">	&#123;&#123; block &#x27;head&#x27; &#125;&#125;&#123;&#123; /block &#125;&#125;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;!-- é€šè¿‡includeå¯¼å…¥å…¬å…±éƒ¨åˆ† --&gt;</span><br><span class="line">	&#123;&#123;include &#x27;./header.html&#x27;&#125;&#125;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- ç•™ä¸€ä¸ªä½ç½® è®©åˆ«çš„å†…å®¹å»å¡«å…… --&gt;</span><br><span class="line">	&#123;&#123; block  &#x27;content&#x27; &#125;&#125;</span><br><span class="line">		&lt;h1&gt;é»˜è®¤å†…å®¹&lt;/h1&gt;</span><br><span class="line">	&#123;&#123; /block &#125;&#125;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- é€šè¿‡includeå¯¼å…¥å…¬å…±éƒ¨åˆ† --&gt;</span><br><span class="line">	&#123;&#123;include &#x27;./footer.html&#x27;&#125;&#125;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- å…¬å…±æ ·å¼ --&gt;</span><br><span class="line">	&lt;script src=&quot;/node_modules/jquery/dist/jquery.js&quot; &gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;/node_modules/bootstrap/dist/js/bootstrap.js&quot; &gt;&lt;/script&gt;</span><br><span class="line">	&#123;&#123; block &#x27;script&#x27; &#125;&#125;&#123;&#123; /block &#125;&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>æ¨¡æ¿çš„ç»§æ‰¿ï¼š</p>
<p>â€‹    headeré¡µé¢ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>å…¬å…±çš„å¤´éƒ¨<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>â€‹    footeré¡µé¢ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>å…¬å…±çš„åº•éƒ¨<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>æ¨¡æ¿é¡µçš„ä½¿ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç»§æ‰¿(extend:å»¶ä¼¸ï¼Œæ‰©å±•)æ¨¡æ¿ä¹Ÿlayout.html --&gt;</span><br><span class="line">&lt;!-- æŠŠlayout.htmlé¡µé¢çš„å†…å®¹éƒ½æ‹¿è¿›æ¥ä½œä¸ºindex.htmlé¡µé¢çš„å†…å®¹ --&gt;</span><br><span class="line">&#123;&#123;extend <span class="string">&#x27;./layout.html&#x27;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- å‘æ¨¡æ¿é¡µé¢å¡«å……æ–°çš„æ•°æ® --&gt;</span><br><span class="line">&lt;!-- å¡«å……åå°±ä¼šæ›¿æ¢æ‰layouté¡µé¢contentä¸­çš„æ•°æ® --&gt;</span><br><span class="line">&lt;!-- styleæ ·å¼æ–¹é¢çš„å†…å®¹ --&gt;</span><br><span class="line">&#123;&#123; block <span class="string">&#x27;head&#x27;</span> &#125;&#125;</span><br><span class="line">	&lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">		body&#123;</span><br><span class="line">			background-color: skyblue;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&#123;&#123; /block &#125;&#125;</span><br><span class="line">&#123;&#123; block <span class="string">&#x27;content&#x27;</span> &#125;&#125;</span><br><span class="line">	&lt;div id=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line">		<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Indexé¡µé¢çš„å†…å®¹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&#123;&#123; /block &#125;&#125;</span><br><span class="line">&lt;!-- jséƒ¨åˆ†çš„å†…å®¹ --&gt;</span><br><span class="line">&#123;&#123; block <span class="string">&#x27;script&#x27;</span> &#125;&#125;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">		</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&#123;&#123; /block &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆçš„æ˜¾ç¤ºæ•ˆæœï¼š</p>
<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200316134759517.png" alt="image-20200316134759517"></p>
<h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h1><h2 id="å…³ç³»å‹å’Œéå…³ç³»å‹æ•°æ®åº“"><a href="#å…³ç³»å‹å’Œéå…³ç³»å‹æ•°æ®åº“" class="headerlink" title="å…³ç³»å‹å’Œéå…³ç³»å‹æ•°æ®åº“"></a>å…³ç³»å‹å’Œéå…³ç³»å‹æ•°æ®åº“</h2><h3 id="å…³ç³»å‹æ•°æ®åº“ï¼ˆè¡¨å°±æ˜¯å…³ç³»ï¼Œæˆ–è€…è¯´è¡¨ä¸è¡¨ä¹‹é—´å­˜åœ¨å…³ç³»ï¼‰ã€‚"><a href="#å…³ç³»å‹æ•°æ®åº“ï¼ˆè¡¨å°±æ˜¯å…³ç³»ï¼Œæˆ–è€…è¯´è¡¨ä¸è¡¨ä¹‹é—´å­˜åœ¨å…³ç³»ï¼‰ã€‚" class="headerlink" title="å…³ç³»å‹æ•°æ®åº“ï¼ˆè¡¨å°±æ˜¯å…³ç³»ï¼Œæˆ–è€…è¯´è¡¨ä¸è¡¨ä¹‹é—´å­˜åœ¨å…³ç³»ï¼‰ã€‚"></a>å…³ç³»å‹æ•°æ®åº“ï¼ˆè¡¨å°±æ˜¯å…³ç³»ï¼Œæˆ–è€…è¯´è¡¨ä¸è¡¨ä¹‹é—´å­˜åœ¨å…³ç³»ï¼‰ã€‚</h3><ul>
<li>æ‰€æœ‰çš„å…³ç³»å‹æ•°æ®åº“éƒ½éœ€è¦é€šè¿‡<code>sql</code>è¯­è¨€æ¥æ“ä½œ</li>
<li>æ‰€æœ‰çš„å…³ç³»å‹æ•°æ®åº“åœ¨æ“ä½œä¹‹å‰éƒ½éœ€è¦è®¾è®¡è¡¨ç»“æ„</li>
<li>è€Œä¸”æ•°æ®è¡¨è¿˜æ”¯æŒçº¦æŸ<ul>
<li>å”¯ä¸€çš„</li>
<li>ä¸»é”®</li>
<li>é»˜è®¤å€¼</li>
<li>éç©º</li>
</ul>
</li>
</ul>
<h3 id="éå…³ç³»å‹æ•°æ®åº“"><a href="#éå…³ç³»å‹æ•°æ®åº“" class="headerlink" title="éå…³ç³»å‹æ•°æ®åº“"></a>éå…³ç³»å‹æ•°æ®åº“</h3><ul>
<li>éå…³ç³»å‹æ•°æ®åº“éå¸¸çš„çµæ´»</li>
<li>æœ‰çš„å…³ç³»å‹æ•°æ®åº“å°±æ˜¯key-valueå¯¹å„¿</li>
<li>ä½†MongDBæ˜¯é•¿å¾—æœ€åƒå…³ç³»å‹æ•°æ®åº“çš„éå…³ç³»å‹æ•°æ®åº“<ul>
<li>æ•°æ®åº“ -ã€‹ æ•°æ®åº“</li>
<li>æ•°æ®è¡¨ -ã€‹ é›†åˆï¼ˆæ•°ç»„ï¼‰</li>
<li>è¡¨è®°å½• -ã€‹æ–‡æ¡£å¯¹è±¡</li>
</ul>
</li>
</ul>
<p>ä¸€ä¸ªæ•°æ®åº“ä¸­å¯ä»¥æœ‰å¤šä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªæ•°æ®åº“ä¸­å¯ä»¥æœ‰å¤šä¸ªé›†åˆï¼ˆæ•°ç»„ï¼‰ï¼Œä¸€ä¸ªé›†åˆä¸­å¯ä»¥æœ‰å¤šä¸ªæ–‡æ¡£ï¼ˆè¡¨è®°å½•ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">qq</span>:&#123;</span><br><span class="line">       <span class="attr">user</span>:[</span><br><span class="line">           &#123;&#125;,&#123;&#125;,&#123;&#125;...</span><br><span class="line">       ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥ä»»æ„çš„å¾€é‡Œé¢å­˜æ•°æ®ï¼Œæ²¡æœ‰ç»“æ„æ€§è¿™ä¹ˆä¸€è¯´</li>
</ul>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><ul>
<li><p>ä¸‹è½½</p>
<ul>
<li>ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.mongodb.com/download-center/community">https://www.mongodb.com/download-center/community</a></li>
</ul>
</li>
<li><p>å®‰è£…</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mongoose</span><br></pre></td></tr></table></figure></li>
<li><p>é…ç½®ç¯å¢ƒå˜é‡</p>
</li>
<li><p>æœ€åè¾“å…¥<code>mongod --version</code>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</p>
</li>
</ul>
<h2 id="å¯åŠ¨å’Œå…³é—­æ•°æ®åº“"><a href="#å¯åŠ¨å’Œå…³é—­æ•°æ®åº“" class="headerlink" title="å¯åŠ¨å’Œå…³é—­æ•°æ®åº“"></a>å¯åŠ¨å’Œå…³é—­æ•°æ®åº“</h2><p>å¯åŠ¨ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mongodb é»˜è®¤ä½¿ç”¨æ‰§è¡Œmongod å‘½ä»¤æ‰€å¤„ç›¼å¤æ ¹ç›®å½•ä¸‹çš„/data/dbä½œä¸ºè‡ªå·±çš„æ•°æ®å­˜å‚¨ç›®å½•</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰€ä»¥åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œè¯¥å‘½ä»¤ä¹‹å‰å…ˆè‡ªå·±æ‰‹åŠ¨æ–°å»ºä¸€ä¸ª /data/db</span></span><br><span class="line">mongod</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæƒ³è¦ä¿®æ”¹é»˜è®¤çš„æ•°æ®å­˜å‚¨ç›®å½•ï¼Œå¯ä»¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath = æ•°æ®å­˜å‚¨ç›®å½•è·¯å¾„</span><br></pre></td></tr></table></figure>

<p>åœæ­¢ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åœ¨å¼€å¯æœåŠ¡çš„æ§åˆ¶å°ï¼Œç›´æ¥Ctrl+C;</span><br><span class="line">æˆ–è€…ç›´æ¥å…³é—­å¼€å¯æœåŠ¡çš„æ§åˆ¶å°ã€‚</span><br></pre></td></tr></table></figure>

<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200314101047100.png" alt="image-20200314101047100"></p>
<h2 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h2><p>è¿æ¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># è¯¥å‘½ä»¤é»˜è®¤è¿æ¥æœ¬æœºçš„ MongoDB æœåŠ¡</span><br><span class="line">mongo</span><br></pre></td></tr></table></figure>

<p>é€€å‡ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># åœ¨è¿æ¥çŠ¶æ€è¾“å…¥ exit é€€å‡ºè¿æ¥</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>



<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200314100821112.png" alt="image-20200314100821112"></p>
<h2 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h2><ul>
<li><code>show dbs</code><ul>
<li>æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨(æ•°æ®åº“ä¸­çš„æ‰€æœ‰æ•°æ®åº“)</li>
</ul>
</li>
<li><code>db</code><ul>
<li>æŸ¥çœ‹å½“å‰è¿æ¥çš„æ•°æ®åº“</li>
</ul>
</li>
<li><code>use æ•°æ®åº“åç§°</code><ul>
<li>åˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“ï¼Œï¼ˆå¦‚æœæ²¡æœ‰ä¼šæ–°å»ºï¼‰</li>
</ul>
</li>
<li><code>show collections</code><ul>
<li>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ•°æ®è¡¨</li>
</ul>
</li>
<li><code>db.è¡¨å.find()</code><ul>
<li>æŸ¥çœ‹è¡¨ä¸­çš„è¯¦ç»†ä¿¡æ¯</li>
</ul>
</li>
</ul>
<h2 id="åœ¨Nodeä¸­å¦‚ä½•æ“ä½œMongoDBæ•°æ®åº“"><a href="#åœ¨Nodeä¸­å¦‚ä½•æ“ä½œMongoDBæ•°æ®åº“" class="headerlink" title="åœ¨Nodeä¸­å¦‚ä½•æ“ä½œMongoDBæ•°æ®åº“"></a>åœ¨Nodeä¸­å¦‚ä½•æ“ä½œMongoDBæ•°æ®åº“</h2><h3 id="ä½¿ç”¨å®˜æ–¹çš„MongoDBåŒ…æ¥æ“ä½œ"><a href="#ä½¿ç”¨å®˜æ–¹çš„MongoDBåŒ…æ¥æ“ä½œ" class="headerlink" title="ä½¿ç”¨å®˜æ–¹çš„MongoDBåŒ…æ¥æ“ä½œ"></a>ä½¿ç”¨å®˜æ–¹çš„<code>MongoDB</code>åŒ…æ¥æ“ä½œ</h3><blockquote>
<p>â€‹    <a target="_blank" rel="noopener" href="http://mongodb.github.io/node-mongodb-native/">http://mongodb.github.io/node-mongodb-native/</a></p>
</blockquote>
<h3 id="ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…mongooseæ¥æ“ä½œMongoDBæ•°æ®åº“"><a href="#ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…mongooseæ¥æ“ä½œMongoDBæ•°æ®åº“" class="headerlink" title="ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…mongooseæ¥æ“ä½œMongoDBæ•°æ®åº“"></a>ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…<code>mongoose</code>æ¥æ“ä½œMongoDBæ•°æ®åº“</h3><p>â€‹    ç¬¬ä¸‰æ–¹åŒ…ï¼š<code>mongoose</code>åŸºäºMongoDBå®˜æ–¹çš„<code>mongodb</code>åŒ…å†ä¸€æ¬¡åšäº†å°è£…ï¼Œåå­—å«<code>mongoose</code>ï¼Œæ˜¯WordPressé¡¹ç›®å›¢é˜Ÿå¼€å‘çš„ã€‚</p>
<blockquote>
<p>â€‹    <a target="_blank" rel="noopener" href="https://mongoosejs.com/">https://mongoosejs.com/</a></p>
</blockquote>
<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200314105632745.png" alt="image-20200314105632745"></p>
<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200314105717993.png" alt="image-20200314105717993"></p>
<h2 id="å­¦ä¹ æŒ‡å—ï¼ˆæ­¥éª¤ï¼‰"><a href="#å­¦ä¹ æŒ‡å—ï¼ˆæ­¥éª¤ï¼‰" class="headerlink" title="å­¦ä¹ æŒ‡å—ï¼ˆæ­¥éª¤ï¼‰"></a>å­¦ä¹ æŒ‡å—ï¼ˆæ­¥éª¤ï¼‰</h2><p>å®˜æ–¹å­¦ä¹ æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://mongoosejs.com/docs/index.html">https://mongoosejs.com/docs/index.html</a></p>
<h3 id="è®¾è®¡Scheme-å‘å¸ƒModel-åˆ›å»ºè¡¨"><a href="#è®¾è®¡Scheme-å‘å¸ƒModel-åˆ›å»ºè¡¨" class="headerlink" title="è®¾è®¡Scheme å‘å¸ƒModel (åˆ›å»ºè¡¨)"></a>è®¾è®¡Scheme å‘å¸ƒModel (åˆ›å»ºè¡¨)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.å¼•åŒ…</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šæŒ‰ç…§åæ‰èƒ½requireä½¿ç”¨</span></span><br><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‹¿åˆ°schemaå›¾è¡¨</span></span><br><span class="line"><span class="keyword">var</span> Schema = mongoose.Schema;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.è¿æ¥æ•°æ®åº“</span></span><br><span class="line"><span class="comment">// æŒ‡å®šè¿æ¥æ•°æ®åº“åä¸éœ€è¦å­˜åœ¨ï¼Œå½“ä½ æ’å…¥ç¬¬ä¸€æ¡æ•°æ®åº“åä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line">mongoose.connect(<span class="string">&#x27;mongodb://localhost/test&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.è®¾è®¡é›†åˆç»“æ„ï¼ˆè¡¨ç»“æ„ï¼‰</span></span><br><span class="line"><span class="comment">// ç”¨æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">var</span> userSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">	<span class="attr">username</span>: &#123; <span class="comment">//å§“å</span></span><br><span class="line">		<span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">		<span class="attr">require</span>: <span class="literal">true</span> <span class="comment">//æ·»åŠ çº¦æŸï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œè®©æ•°æ®æŒ‰è§„çŸ©ç»Ÿä¸€</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">password</span>: &#123;</span><br><span class="line">		<span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">		<span class="attr">require</span>: <span class="literal">true</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">email</span>: &#123;</span><br><span class="line">		<span class="attr">type</span>: <span class="built_in">String</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.å°†æ–‡æ¡£ç»“æ„å‘å¸ƒä¸ºæ¨¡å‹</span></span><br><span class="line"><span class="comment">// mongoose.modelæ–¹æ³•å°±æ˜¯ç”¨æ¥å°†ä¸€ä¸ªæ¶æ„å‘å¸ƒä¸º model</span></span><br><span class="line"><span class="comment">// 		ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä¼ å…¥ä¸€ä¸ªå¤§å†™åè¯å•æ•°å­—ç¬¦ä¸²ç”¨æ¥è¡¨ç¤ºä½ çš„æ•°æ®åº“çš„åç§°</span></span><br><span class="line"><span class="comment">// 					mongoose ä¼šè‡ªåŠ¨å°†å¤§å†™åè¯çš„å­—ç¬¦ä¸²ç”Ÿæˆ å°å†™å¤æ•° çš„é›†åˆåç§°</span></span><br><span class="line"><span class="comment">// 					ä¾‹å¦‚ è¿™é‡Œä¼šå˜æˆusersé›†åˆåç§°</span></span><br><span class="line"><span class="comment">// 		ç¬¬äºŒä¸ªå‚æ•°ï¼šæ¶æ„</span></span><br><span class="line"><span class="comment">// 	è¿”å›å€¼ï¼šæ¨¡å‹æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> User = mongoose.model(<span class="string">&#x27;User&#x27;</span>, userSchema);</span><br></pre></td></tr></table></figure>

<h3 id="æ·»åŠ æ•°æ®ï¼ˆå¢ï¼‰"><a href="#æ·»åŠ æ•°æ®ï¼ˆå¢ï¼‰" class="headerlink" title="æ·»åŠ æ•°æ®ï¼ˆå¢ï¼‰"></a>æ·»åŠ æ•°æ®ï¼ˆå¢ï¼‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 5.é€šè¿‡æ¨¡å‹æ„é€ å‡½æ•°å¯¹Userä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œ</span></span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> User(&#123;</span><br><span class="line">	<span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">	<span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">	<span class="attr">email</span>: <span class="string">&#x27;xiaochen@qq.com&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">user.save(<span class="function"><span class="keyword">function</span>(<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;ä¿å­˜å¤±è´¥&#x27;</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;ä¿å­˜æˆåŠŸ&#x27;</span>);</span><br><span class="line">		<span class="built_in">console</span>.log(ret);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤ï¼ˆåˆ ï¼‰"><a href="#åˆ é™¤ï¼ˆåˆ ï¼‰" class="headerlink" title="åˆ é™¤ï¼ˆåˆ ï¼‰"></a>åˆ é™¤ï¼ˆåˆ ï¼‰</h3><p>æ ¹æ®æ¡ä»¶åˆ é™¤æ‰€æœ‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">User.remove(&#123;</span><br><span class="line">	<span class="attr">username</span>: <span class="string">&#x27;xiaoxiao&#x27;</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;åˆ é™¤å¤±è´¥&#x27;</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;åˆ é™¤æˆåŠŸ&#x27;</span>);</span><br><span class="line">		<span class="built_in">console</span>.log(ret);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®æ¡ä»¶åˆ é™¤ä¸€ä¸ªï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Model.findOneAndRemove(conditions,[options],[callback]);</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®idåˆ é™¤ä¸€ä¸ªï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User.findByIdAndRemove(id,[options],[callback]);</span><br></pre></td></tr></table></figure>



<h3 id="æ›´æ–°ï¼ˆæ”¹ï¼‰"><a href="#æ›´æ–°ï¼ˆæ”¹ï¼‰" class="headerlink" title="æ›´æ–°ï¼ˆæ”¹ï¼‰"></a>æ›´æ–°ï¼ˆæ”¹ï¼‰</h3><p>æ›´æ–°æ‰€æœ‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User.remove(conditions,doc,[options],[callback]);</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®æŒ‡å®šæ¡ä»¶æ›´æ–°ä¸€ä¸ªï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User.FindOneAndUpdate([conditions],[update],[options],[callback]);</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®idæ›´æ–°ä¸€ä¸ªï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°	æ ¹æ®idæ¥ä¿®æ”¹è¡¨æ•°æ®</span></span><br><span class="line">User.findByIdAndUpdate(<span class="string">&#x27;5e6c5264fada77438c45dfcd&#x27;</span>, &#123;</span><br><span class="line">	<span class="attr">username</span>: <span class="string">&#x27;junjun&#x27;</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;æ›´æ–°å¤±è´¥&#x27;</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;æ›´æ–°æˆåŠŸ&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h3 id="æŸ¥è¯¢ï¼ˆæŸ¥ï¼‰"><a href="#æŸ¥è¯¢ï¼ˆæŸ¥ï¼‰" class="headerlink" title="æŸ¥è¯¢ï¼ˆæŸ¥ï¼‰"></a>æŸ¥è¯¢ï¼ˆæŸ¥ï¼‰</h3><p>æŸ¥è¯¢æ‰€æœ‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line">User.find(<span class="function"><span class="keyword">function</span>(<span class="params">err,ret</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err)&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;æŸ¥è¯¢å¤±è´¥&#x27;</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(ret);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æ¡ä»¶æŸ¥è¯¢æ‰€æœ‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line">User.find(&#123; <span class="attr">username</span>:<span class="string">&#x27;xiaoxiao&#x27;</span> &#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err,ret</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err)&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;æŸ¥è¯¢å¤±è´¥&#x27;</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(ret);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æ¡ä»¶æŸ¥è¯¢å•ä¸ªï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢å•ä¸ªï¼ŒæŸ¥è¯¢å‡ºæ¥çš„æ•°æ®æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆ&#123;&#125;ï¼‰</span></span><br><span class="line"><span class="comment">// æ²¡æœ‰æ¡ä»¶æŸ¥è¯¢ä½¿ç”¨findOneæ–¹æ³•ï¼ŒæŸ¥è¯¢çš„æ˜¯è¡¨ä¸­çš„ç¬¬ä¸€æ¡æ•°æ®</span></span><br><span class="line">User.findOne(&#123;</span><br><span class="line">	<span class="attr">username</span>: <span class="string">&#x27;xiaoxiao&#x27;</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;æŸ¥è¯¢å¤±è´¥&#x27;</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(ret);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="ä½¿ç”¨Nodeæ“ä½œMySQLæ•°æ®åº“"><a href="#ä½¿ç”¨Nodeæ“ä½œMySQLæ•°æ®åº“" class="headerlink" title="ä½¿ç”¨Nodeæ“ä½œMySQLæ•°æ®åº“"></a>ä½¿ç”¨Nodeæ“ä½œMySQLæ•°æ®åº“</h1><p>æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/mysql">https://www.npmjs.com/package/mysql</a></p>
<p>å®‰è£…ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save  mysql</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥mysqlåŒ…</span></span><br><span class="line"><span class="keyword">var</span> mysql      = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºè¿æ¥</span></span><br><span class="line"><span class="keyword">var</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  <span class="attr">host</span>     : <span class="string">&#x27;localhost&#x27;</span>,	<span class="comment">//æœ¬æœº</span></span><br><span class="line">  <span class="attr">user</span>     : <span class="string">&#x27;me&#x27;</span>,		<span class="comment">//è´¦å·root</span></span><br><span class="line">  <span class="attr">password</span> : <span class="string">&#x27;secret&#x27;</span>,	<span class="comment">//å¯†ç 12345</span></span><br><span class="line">  <span class="attr">database</span> : <span class="string">&#x27;my_db&#x27;</span>	<span class="comment">//æ•°æ®åº“å</span></span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// è¿æ¥æ•°æ®åº“	ï¼ˆæ‰“å¼€å†°ç®±é—¨ï¼‰</span></span><br><span class="line">connection.connect();</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ‰§è¡Œæ•°æ®æ“ä½œ	ï¼ˆæŠŠå¤§è±¡æ”¾åˆ°å†°ç®±ï¼‰</span></span><br><span class="line">connection.query(<span class="string">&#x27;SELECT * FROM `users` &#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, results, fields</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;<span class="comment">//æŠ›å‡ºå¼‚å¸¸é˜»æ­¢ä»£ç å¾€ä¸‹æ‰§è¡Œ</span></span><br><span class="line">  <span class="comment">// æ²¡æœ‰å¼‚å¸¸æ‰“å°è¾“å‡ºç»“æœ</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;The solution is: &#x27;</span>,results);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…³é—­è¿æ¥	ï¼ˆå…³é—­å†°ç®±é—¨ï¼‰</span></span><br><span class="line">connection.end();</span><br></pre></td></tr></table></figure>





<h1 id="å¼‚æ­¥ç¼–ç¨‹"><a href="#å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="å¼‚æ­¥ç¼–ç¨‹"></a>å¼‚æ­¥ç¼–ç¨‹</h1><h2 id="å›è°ƒå‡½æ•°"><a href="#å›è°ƒå‡½æ•°" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h2><p>ä¸æˆç«‹çš„æƒ…å†µä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">var</span> ret = x + y;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">    <span class="comment">//åˆ°è¿™é‡Œæ‰§è¡Œå°±ç»“æŸäº†ï¼Œä¸ä¼šiç­‰åˆ°å‰é¢çš„å®šæ—¶å™¨ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›äº†é»˜è®¤å€¼ undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">2</span>,<span class="number">2</span>));</span><br><span class="line"><span class="comment">// ç»“æœæ˜¯ 1 3 undefined 4</span></span><br></pre></td></tr></table></figure>

<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200313085008929.png" alt="image-20200313085008929"></p>
<p>ä½¿ç”¨å›è°ƒå‡½æ•°è§£å†³ï¼š</p>
<p>å›è°ƒå‡½æ•°ï¼šé€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼Œè·å–å‡½æ•°å†…éƒ¨çš„æ“ä½œã€‚ï¼ˆæ ¹æ®è¾“å…¥å¾—åˆ°è¾“å‡ºç»“æœï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ret;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x,y,callback</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// callbackå°±æ˜¯å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="comment">// var x = 10;</span></span><br><span class="line">    <span class="comment">// var y = 20;</span></span><br><span class="line">    <span class="comment">// var callback = function(ret)&#123;console.log(ret);&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> ret = x + y;</span><br><span class="line">        callback(ret);</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">10</span>,<span class="number">20</span>,<span class="function"><span class="keyword">function</span>(<span class="params">ret</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200313084746701.png" alt="image-20200313084746701" style="zoom:100%;">

<p>æ³¨æ„ï¼š</p>
<p>â€‹    å‡¡æ˜¯éœ€è¦å¾—åˆ°ä¸€ä¸ªå‡½æ•°å†…éƒ¨å¼‚æ­¥æ“ä½œçš„ç»“æœï¼ˆsetTimeout,readFile,writeFile,ajax,readdirï¼‰</p>
<p>â€‹    è¿™ç§æƒ…å†µå¿…é¡»é€šè¿‡   å›è°ƒå‡½æ•° (å¼‚æ­¥APIéƒ½ä¼šä¼´éšç€ä¸€ä¸ªå›è°ƒå‡½æ•°)</p>
<p>ajax:</p>
<p>åŸºäºåŸç”ŸXMLHttpRequestå°è£…getæ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">// å½“è¯·æ±‚åŠ è½½æˆåŠŸè¦è°ƒç”¨æŒ‡å®šçš„å‡½æ•°</span></span><br><span class="line">oReq.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(oReq.responseText);</span><br><span class="line">&#125;</span><br><span class="line">oReq.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;è¯·æ±‚è·¯å¾„&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">oReq.send();</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url,callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    <span class="comment">// å½“è¯·æ±‚åŠ è½½æˆåŠŸè¦è°ƒç”¨æŒ‡å®šçš„å‡½æ•°</span></span><br><span class="line">    oReq.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//console.log(oReq.responseText);</span></span><br><span class="line">        callback(oReq.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">    oReq.open(<span class="string">&quot;GET&quot;</span>, url,<span class="literal">true</span>);</span><br><span class="line">    oReq.send();</span><br><span class="line">&#125;</span><br><span class="line">get(<span class="string">&#x27;data.json&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>callback  hellï¼ˆå›è°ƒåœ°ç‹±ï¼‰:</p>
<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200314143410972.png" alt="image-20200314143410972"></p>
<p>æ–‡ä»¶çš„è¯»å–æ— æ³•åˆ¤æ–­æ‰§è¡Œé¡ºåºï¼ˆæ–‡ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯ä¾æ®æ–‡ä»¶çš„å¤§å°æ¥å†³å®šçš„ï¼‰(å¼‚æ­¥apiæ— æ³•ä¿è¯æ–‡ä»¶çš„æ‰§è¡Œé¡ºåº)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/a.text&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err)&#123;</span><br><span class="line">		<span class="comment">// 1 è¯»å–å¤±è´¥ç›´æ¥æ‰“å°è¾“å‡ºè¯»å–å¤±è´¥</span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;è¯»å–å¤±è´¥&#x27;</span>);</span><br><span class="line">		<span class="comment">// 2 æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">		<span class="comment">// 		é˜»æ­¢ç¨‹åºçš„æ‰§è¡Œ</span></span><br><span class="line">		<span class="comment">// 		æŠŠé”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°</span></span><br><span class="line">		<span class="keyword">throw</span> err;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/b.text&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err)&#123;</span><br><span class="line">		<span class="comment">// 1 è¯»å–å¤±è´¥ç›´æ¥æ‰“å°è¾“å‡ºè¯»å–å¤±è´¥</span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;è¯»å–å¤±è´¥&#x27;</span>);</span><br><span class="line">		<span class="comment">// 2 æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">		<span class="comment">// 		é˜»æ­¢ç¨‹åºçš„æ‰§è¡Œ</span></span><br><span class="line">		<span class="comment">// 		æŠŠé”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°</span></span><br><span class="line">		<span class="keyword">throw</span> err;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡å›è°ƒåµŒå¥—çš„æ–¹å¼æ¥ä¿è¯é¡ºåºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/a.text&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err)&#123;</span><br><span class="line">		<span class="comment">// 1 è¯»å–å¤±è´¥ç›´æ¥æ‰“å°è¾“å‡ºè¯»å–å¤±è´¥</span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;è¯»å–å¤±è´¥&#x27;</span>);</span><br><span class="line">		<span class="comment">// 2 æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">		<span class="comment">// 		é˜»æ­¢ç¨‹åºçš„æ‰§è¡Œ</span></span><br><span class="line">		<span class="comment">// 		æŠŠé”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°</span></span><br><span class="line">		<span class="keyword">throw</span> err;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(data);</span><br><span class="line">	fs.readFile(<span class="string">&#x27;./data/b.text&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(err)&#123;</span><br><span class="line">			<span class="comment">// 1 è¯»å–å¤±è´¥ç›´æ¥æ‰“å°è¾“å‡ºè¯»å–å¤±è´¥</span></span><br><span class="line">			<span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;è¯»å–å¤±è´¥&#x27;</span>);</span><br><span class="line">			<span class="comment">// 2 æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">			<span class="comment">// 		é˜»æ­¢ç¨‹åºçš„æ‰§è¡Œ</span></span><br><span class="line">			<span class="comment">// 		æŠŠé”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°</span></span><br><span class="line">			<span class="keyword">throw</span> err;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">console</span>.log(data);</span><br><span class="line">		fs.readFile(<span class="string">&#x27;./data/a.text&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(err)&#123;</span><br><span class="line">				<span class="comment">// 1 è¯»å–å¤±è´¥ç›´æ¥æ‰“å°è¾“å‡ºè¯»å–å¤±è´¥</span></span><br><span class="line">				<span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;è¯»å–å¤±è´¥&#x27;</span>);</span><br><span class="line">				<span class="comment">// 2 æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">				<span class="comment">// 		é˜»æ­¢ç¨‹åºçš„æ‰§è¡Œ</span></span><br><span class="line">				<span class="comment">// 		æŠŠé”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°</span></span><br><span class="line">				<span class="keyword">throw</span> err;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">console</span>.log(data);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200314144807008.png" alt="image-20200314144807008">ä¸ºäº†è§£å†³ä»¥ä¸Šç¼–ç æ–¹å¼å¸¦æ¥çš„é—®é¢˜ï¼ˆå›è°ƒåœ°ç‹±åµŒå¥—ï¼‰ï¼Œæ‰€ä»¥åœ¨EcmaScript6æ–°å¢äº†ä¸€ä¸ªAPI:<code>Promise</code>ã€‚<img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200314150050839.png" alt="image-20200314150050839"></p>
<ul>
<li>Promiseï¼šæ‰¿è¯ºï¼Œä¿è¯</li>
<li>Promiseæœ¬èº«ä¸æ˜¯å¼‚æ­¥çš„ï¼Œä½†å¾€å¾€éƒ½æ˜¯å†…éƒ¨å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡</li>
</ul>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨EcmaScript 6ä¸­æ–°å¢äº†ä¸€ä¸ªAPI Promise</span></span><br><span class="line"><span class="comment">// Promise æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 1 åˆ›å»ºPromiseå®¹å™¨		resolve:è§£å†³   rejectï¼šå¤±è´¥</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">	fs.readFile(<span class="string">&#x27;./a.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (err) &#123;</span><br><span class="line">			<span class="comment">// console.log(err);</span></span><br><span class="line">			<span class="comment">// æŠŠå®¹å™¨çš„PendingçŠ¶æ€å˜ä¸ºrejected</span></span><br><span class="line">			reject(err);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">// console.log(data);</span></span><br><span class="line">			<span class="comment">// æŠŠå®¹å™¨çš„PendingçŠ¶æ€å˜ä¸ºresolve</span></span><br><span class="line">			resolve(<span class="number">1234</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“p1æˆåŠŸäº†ï¼Œç„¶åå°±ï¼ˆthenï¼‰åšæŒ‡å®šçš„æ“ä½œ</span></span><br><span class="line"><span class="comment">// thenæ–¹æ³•æ¥æ”¶çš„functionå°±æ˜¯å®¹å™¨ä¸­çš„resolveå‡½æ•°</span></span><br><span class="line">p1</span><br><span class="line">	.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(data);</span><br><span class="line">	&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;è¯»å–æ–‡ä»¶å¤±è´¥äº†&#x27;</span>, err);</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200315100611620.png" alt="image-20200315100611620"></p>
<p>é“¾å¼å¾ªç¯ï¼š<img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200315125559136.png" alt="image-20200315125559136"></p>
<p>å°è£…Promiseçš„<code>readFile</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pReadFile</span>(<span class="params">filePath</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">		fs.readFile(filePath, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">if</span> (err) &#123;</span><br><span class="line">				reject(err);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				resolve(data);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pReadFile(<span class="string">&#x27;./a.txt&#x27;</span>)</span><br><span class="line">	.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(data);</span><br><span class="line">		<span class="keyword">return</span> pReadFile(<span class="string">&#x27;./b.txt&#x27;</span>);</span><br><span class="line">	&#125;)</span><br><span class="line">	.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(data);</span><br><span class="line">		<span class="keyword">return</span> pReadFile(<span class="string">&#x27;./a.txt&#x27;</span>);</span><br><span class="line">	&#125;)</span><br><span class="line">	.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(data);</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>mongooseæ‰€æœ‰çš„APIéƒ½æ”¯æŒPromiseï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line">User.find()</span><br><span class="line">	.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>æ³¨å†Œï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">User.findOne(&#123;<span class="attr">username</span>:<span class="string">&#x27;admin&#x27;</span>&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">user</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(user)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;ç”¨æˆ·å·²å­˜åœ¨&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> User(&#123;</span><br><span class="line">             <span class="attr">username</span>:<span class="string">&#x27;aaa&#x27;</span>,</span><br><span class="line">             <span class="attr">password</span>:<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">             <span class="attr">email</span>:<span class="string">&#x27;fffff&#x27;</span></span><br><span class="line">        &#125;).save(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;æ³¨å†ŒæˆåŠŸ&#x27;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">User.findOne(&#123;</span><br><span class="line">    <span class="attr">username</span>:<span class="string">&#x27;admin&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">user</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(user)&#123;</span><br><span class="line">            <span class="comment">// ç”¨æˆ·å·²ç»å­˜åœ¨ä¸èƒ½æ³¨å†Œ</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;ç”¨æˆ·å·²å­˜åœ¨&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// ç”¨æˆ·ä¸å­˜åœ¨å¯ä»¥æ³¨å†Œ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> User(&#123;</span><br><span class="line">                <span class="attr">username</span>:<span class="string">&#x27;aaa&#x27;</span>,</span><br><span class="line">                <span class="attr">password</span>:<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">                <span class="attr">email</span>:<span class="string">&#x27;fffff&#x27;</span></span><br><span class="line">            &#125;).save();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="title">funciton</span>(<span class="params">ret</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;æ³¨å†ŒæˆåŠŸ&#x27;</span>);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>



<h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><p>asyncå‡½æ•°</p>
<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="ä¿®æ”¹å®Œä»£ç è‡ªåŠ¨é‡å¯"><a href="#ä¿®æ”¹å®Œä»£ç è‡ªåŠ¨é‡å¯" class="headerlink" title="ä¿®æ”¹å®Œä»£ç è‡ªåŠ¨é‡å¯"></a>ä¿®æ”¹å®Œä»£ç è‡ªåŠ¨é‡å¯</h2><p>æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹å‘½åè¡Œå·¥å…·ï¼š<code>nodemon</code>æ¥å¸®åŠ©æˆ‘ä»¬è§£å†³é¢‘ç¹ä¿®æ”¹ä»£ç é‡å¯æœåŠ¡å™¨çš„é—®é¢˜ã€‚</p>
<p><code>nodemon</code>æ˜¯ä¸€ä¸ªåŸºäºNode.jså¼€å‘çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹å‘½ä»¤è¡Œå·¥å…·ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™éœ€è¦ç‹¬ç«‹å®‰è£…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#åœ¨ä»»æ„ç›®å½•æ‰§è¡Œè¯¥å‘½ä»¤éƒ½å¯ä»¥</span><br><span class="line">#ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰éœ€è¦ --<span class="built_in">global</span>å®‰è£…çš„åŒ…éƒ½å¯ä»¥åœ¨ä»»æ„ç›®å½•æ‰§è¡Œ</span><br><span class="line">npm install --<span class="built_in">global</span> nodemon</span><br><span class="line">npm install -g nodemon</span><br><span class="line"></span><br><span class="line">#å¦‚æœå®‰è£…ä¸æˆåŠŸçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨cnpmå®‰è£…</span><br><span class="line">cnpm install -g nodemon</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å®Œæ¯•ä¹‹åä½¿ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">node app.js</span><br><span class="line"></span><br><span class="line">#ä½¿ç”¨nodemon</span><br><span class="line">nodemon app.js</span><br></pre></td></tr></table></figure>

<p>åªè¦æ˜¯é€šè¿‡<code>nodemon</code>å¯åŠ¨çš„æœåŠ¡ï¼Œåˆ™ä»–ä¼šç›‘è§†ä½ çš„æ–‡ä»¶å˜åŒ–ï¼Œå½“æ–‡ä»¶å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¸®ä½ é‡å¯æœåŠ¡å™¨ã€‚</p>
<h2 id="å°è£…å¼‚æ­¥API"><a href="#å°è£…å¼‚æ­¥API" class="headerlink" title="å°è£…å¼‚æ­¥API"></a>å°è£…å¼‚æ­¥API</h2><p>å›è°ƒå‡½æ•°ï¼šè·å–å¼‚æ­¥æ“ä½œçš„ç»“æœ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// var callback = funtion(data)&#123; console.log(data); &#125;</span></span><br><span class="line">	<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> data = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">        callback(data);</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœéœ€è¦è·å–ä¸€ä¸ªå‡½æ•°ä¸­å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œåˆ™å¿…é¡»é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼æ¥è·å–</span></span><br><span class="line">fn(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="æ•°ç»„çš„éå†æ–¹æ³•ï¼Œéƒ½æ˜¯å¯¹å‡½æ•°ä½œä¸ºä¸€ç§å‚æ•°"><a href="#æ•°ç»„çš„éå†æ–¹æ³•ï¼Œéƒ½æ˜¯å¯¹å‡½æ•°ä½œä¸ºä¸€ç§å‚æ•°" class="headerlink" title="æ•°ç»„çš„éå†æ–¹æ³•ï¼Œéƒ½æ˜¯å¯¹å‡½æ•°ä½œä¸ºä¸€ç§å‚æ•°"></a>æ•°ç»„çš„éå†æ–¹æ³•ï¼Œéƒ½æ˜¯å¯¹å‡½æ•°ä½œä¸ºä¸€ç§å‚æ•°</h2><p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200314094620191.png" alt="image-20200314094620191"></p>
<h2 id="EcmaScript-6"><a href="#EcmaScript-6" class="headerlink" title="EcmaScript 6"></a>EcmaScript 6</h2><blockquote>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/">https://es6.ruanyifeng.com/</a></p>
</blockquote>
<h1 id="é¡¹ç›®æ¡ˆä¾‹"><a href="#é¡¹ç›®æ¡ˆä¾‹" class="headerlink" title="é¡¹ç›®æ¡ˆä¾‹"></a>é¡¹ç›®æ¡ˆä¾‹</h1><h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">app.js	é¡¹ç›®çš„å…¥å£æ–‡ä»¶</span><br><span class="line">controllers</span><br><span class="line">models	å­˜å‚¨ä½¿ç”¨mongooseè®¾è®¡çš„æ•°æ®æ¨¡å‹</span><br><span class="line">node_modules	ç¬¬ä¸‰æ–¹åŒ…</span><br><span class="line">package.json	åŒ…æè¿°æ–‡ä»¶</span><br><span class="line">package-lock.json	ç¬¬ä¸‰æ–¹åŒ…ç‰ˆæœ¬é”å®šæ–‡ä»¶ï¼ˆnpm5ä¹‹åæ‰æœ‰ï¼‰</span><br><span class="line">public	å…¬å…±é™æ€èµ„æº</span><br><span class="line">routes</span><br><span class="line">views	å­˜å‚¨è§†å›¾ç›®å½•</span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡æ¿é¡µ"><a href="#æ¨¡æ¿é¡µ" class="headerlink" title="æ¨¡æ¿é¡µ"></a>æ¨¡æ¿é¡µ</h2><ul>
<li>å­æ¨¡æ¿</li>
<li>æ¨¡æ¿ç»§æ‰¿</li>
</ul>
<h2 id="è·¯ç”±è®¾è®¡-1"><a href="#è·¯ç”±è®¾è®¡-1" class="headerlink" title="è·¯ç”±è®¾è®¡"></a>è·¯ç”±è®¾è®¡</h2><table>
<thead>
<tr>
<th>è·¯ç”±</th>
<th>æ–¹æ³•</th>
<th>getå‚æ•°</th>
<th>postå‚æ•°</th>
<th>æ˜¯å¦éœ€è¦ç™»å½•</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td>/</td>
<td>get</td>
<td></td>
<td></td>
<td></td>
<td>æ¸²æŸ“é¦–é¡µ</td>
</tr>
<tr>
<td>/register(ç™»å½•)</td>
<td>get</td>
<td></td>
<td></td>
<td></td>
<td>æ¸²æŸ“æ³¨å†Œé¡µé¢</td>
</tr>
<tr>
<td>/register</td>
<td>post</td>
<td></td>
<td>email,nickname,password</td>
<td></td>
<td>å¤„ç†æ³¨å†Œè¯·æ±‚</td>
</tr>
<tr>
<td>/login</td>
<td>get</td>
<td></td>
<td></td>
<td></td>
<td>æ¸²æŸ“ç™»é™†ç•Œé¢</td>
</tr>
<tr>
<td>/login</td>
<td>post</td>
<td></td>
<td>email,password</td>
<td></td>
<td>å¤„ç†ç™»å½•è¯·æ±‚</td>
</tr>
<tr>
<td>/loginout</td>
<td>get</td>
<td></td>
<td></td>
<td></td>
<td>å¤„ç†é€€å‡ºè¯·æ±‚</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="æ¨¡å‹è®¾è®¡"><a href="#æ¨¡å‹è®¾è®¡" class="headerlink" title="æ¨¡å‹è®¾è®¡"></a>æ¨¡å‹è®¾è®¡</h2><h2 id="åŠŸèƒ½å®ç°"><a href="#åŠŸèƒ½å®ç°" class="headerlink" title="åŠŸèƒ½å®ç°"></a>åŠŸèƒ½å®ç°</h2><h2 id="æ­¥éª¤-1"><a href="#æ­¥éª¤-1" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ul>
<li>åˆ›å»ºç›®å½•ç»“æ„</li>
<li>æ•´åˆé™æ€ä¹Ÿ-æ¨¡æ¿é¡µ<ul>
<li>include</li>
<li>block</li>
<li>extend</li>
</ul>
</li>
<li>è®¾è®¡ç”¨æˆ·ç™»é™†ï¼Œé€€å‡ºï¼Œæ³¨å†Œçš„è·¯ç”±</li>
<li>ç”¨æˆ·æ³¨å†Œ<ul>
<li>å…ˆå¤„ç†å®¢æˆ·ç«¯é¡µé¢çš„å†…å®¹ï¼ˆè¡¨å•æ§ä»¶çš„nameï¼Œæ”¶é›†è¡¨å•æ•°æ®ï¼Œå‘èµ·è¯·æ±‚ï¼‰</li>
<li>æœåŠ¡ç«¯<ul>
<li>è·å–ä»å®¢æˆ·ç«¯æ”¶åˆ°çš„æ•°æ®</li>
<li>æ“ä½œæ•°æ®åº“<ul>
<li>å¦‚æœæœ‰é”™ï¼Œå‘é€500å‘Šè¯‰å®¢æˆ·ç«¯æœåŠ¡å™¨é”™äº†â€˜</li>
<li>å…¶ä»–çš„æ ¹æ®ä¸šåŠ¡å‘é€ä¸åŒçš„å“åº”æ•°æ®</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ç™»å½•</li>
<li>é€€å‡º</li>
</ul>
<h1 id="Expressä¸­é—´ä»¶"><a href="#Expressä¸­é—´ä»¶" class="headerlink" title="Expressä¸­é—´ä»¶"></a>Expressä¸­é—´ä»¶</h1><h2 id="ä¸­é—´ä»¶çš„æ¦‚å¿µ"><a href="#ä¸­é—´ä»¶çš„æ¦‚å¿µ" class="headerlink" title="ä¸­é—´ä»¶çš„æ¦‚å¿µ"></a>ä¸­é—´ä»¶çš„æ¦‚å¿µ</h2><blockquote>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="http://expressjs.com/en/guide/using-middleware.html">http://expressjs.com/en/guide/using-middleware.html</a></p>
</blockquote>
<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200316202757617.png" alt="image-20200316202757617"></p>
<p>ä¸­é—´ä»¶ï¼šæŠŠå¾ˆå¤æ‚çš„äº‹æƒ…åˆ†å‰²æˆå•ä¸ªï¼Œç„¶åä¾æ¬¡æœ‰æ¡ç†çš„æ‰§è¡Œã€‚å°±æ˜¯ä¸€ä¸ªä¸­é—´å¤„ç†ç¯èŠ‚ï¼Œæœ‰è¾“å…¥ï¼Œæœ‰è¾“å‡ºã€‚</p>
<p>è¯´çš„é€šä¿—æ˜“æ‡‚ç‚¹å„¿ï¼Œä¸­é—´ä»¶å°±æ˜¯ä¸€ä¸ªï¼ˆä»è¯·æ±‚åˆ°å“åº”è°ƒç”¨çš„æ–¹æ³•ï¼‰æ–¹æ³•ã€‚</p>
<p>æŠŠæ•°æ®ä»è¯·æ±‚åˆ°å“åº”åˆ†æ­¥éª¤æ¥å¤„ç†ï¼Œæ¯ä¸€ä¸ªæ­¥éª¤éƒ½æ˜¯ä¸€ä¸ªä¸­é—´å¤„ç†ç¯èŠ‚ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cookie = <span class="built_in">require</span>(<span class="string">&#x27;./expressPtoject/cookie&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> query = <span class="built_in">require</span>(<span class="string">&#x27;./expressPtoject/query&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> postBody = <span class="built_in">require</span>(<span class="string">&#x27;./expressPtoject/post-body&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">// è§£æè¯·æ±‚åœ°å€ä¸­çš„getå‚æ•°</span></span><br><span class="line">	<span class="comment">// var obj = url.parse(req.url,true);</span></span><br><span class="line">	<span class="comment">// req.query = obj.query;</span></span><br><span class="line">	query(req,res);	<span class="comment">//ä¸­é—´ä»¶</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// è§£æè¯·æ±‚åœ°å€ä¸­çš„postå‚æ•°</span></span><br><span class="line">	req.body = &#123;</span><br><span class="line">		<span class="attr">foo</span>:<span class="string">&#x27;bar&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(req.url === <span class="string">&#x27;xxx&#x27;</span>)&#123;</span><br><span class="line">	<span class="comment">// å¤„ç†è¯·æ±‚</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;3000 runing...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åŒä¸€ä¸ªè¯·æ±‚å¯¹è±¡æ‰€ç»è¿‡çš„ä¸­é—´ä»¶éƒ½æ˜¯åŒä¸€ä¸ªè¯·æ±‚å¯¹è±¡å’Œå“åº”å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line">app.get(<span class="string">&#x27;/abc&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">	<span class="comment">// åŒä¸€ä¸ªè¯·æ±‚çš„reqå’Œresæ˜¯ä¸€æ ·çš„ï¼Œ</span></span><br><span class="line">	<span class="comment">// å¯ä»¥å‰é¢å­˜å‚¨ä¸‹é¢è°ƒç”¨</span></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;/abc&#x27;</span>);</span><br><span class="line">	<span class="comment">// req.foo = &#x27;bar&#x27;;</span></span><br><span class="line">	req.body = &#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="string">&#x27;xiaoxiao&#x27;</span>,</span><br><span class="line">		<span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">	&#125;</span><br><span class="line">	next();</span><br><span class="line">&#125;);</span><br><span class="line">app.get(<span class="string">&#x27;/abc&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">	<span class="comment">// console.log(req.foo);</span></span><br><span class="line">	<span class="built_in">console</span>.log(req.body);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;/abc&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;app is running at port 3000.&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2021/11/10/nodejs/Users\A\AppData\Roaming\Typora\typora-user-images\image-20200317110520098.png" alt="image-20200317110520098"></p>
<h2 id="ä¸­é—´ä»¶çš„åˆ†ç±»"><a href="#ä¸­é—´ä»¶çš„åˆ†ç±»" class="headerlink" title="ä¸­é—´ä»¶çš„åˆ†ç±»:"></a>ä¸­é—´ä»¶çš„åˆ†ç±»:</h2><h3 id="åº”ç”¨ç¨‹åºçº§åˆ«çš„ä¸­é—´ä»¶"><a href="#åº”ç”¨ç¨‹åºçº§åˆ«çš„ä¸­é—´ä»¶" class="headerlink" title="åº”ç”¨ç¨‹åºçº§åˆ«çš„ä¸­é—´ä»¶"></a>åº”ç”¨ç¨‹åºçº§åˆ«çš„ä¸­é—´ä»¶</h3><p>ä¸‡èƒ½åŒ¹é…ï¼ˆä¸å…³å¿ƒä»»ä½•è¯·æ±‚è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•çš„ä¸­é—´ä»¶ï¼‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Time&#x27;</span>,<span class="built_in">Date</span>.now());</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å…³å¿ƒè¯·æ±‚è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•çš„ä¸­é—´ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">&#x27;/a&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Time&#x27;</span>,<span class="built_in">Date</span>.now());</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±çº§åˆ«çš„ä¸­é—´ä»¶"><a href="#è·¯ç”±çº§åˆ«çš„ä¸­é—´ä»¶" class="headerlink" title="è·¯ç”±çº§åˆ«çš„ä¸­é—´ä»¶"></a>è·¯ç”±çº§åˆ«çš„ä¸­é—´ä»¶</h3><p>ä¸¥æ ¼åŒ¹é…è¯·æ±‚è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•çš„ä¸­é—´ä»¶</p>
<p>get:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">	res.send(<span class="string">&#x27;get&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>postï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.post(<span class="string">&#x27;/a&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">	res.send(<span class="string">&#x27;post&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>put:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.put(<span class="string">&#x27;/user&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">	res.send(<span class="string">&#x27;put&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>delete:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.delete(<span class="string">&#x27;/delete&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">	res.send(<span class="string">&#x27;delete&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="æ€»"><a href="#æ€»" class="headerlink" title="æ€»"></a>æ€»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­é—´ä»¶ï¼šå¤„ç†è¯·æ±‚ï¼Œæœ¬è´¨å°±æ˜¯ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="comment">// åœ¨expressä¸­ï¼Œå¯¹ä¸­é—´ä»¶æœ‰å‡ ç§åˆ†ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 ä¸å…³å¿ƒä»»ä½•è¯·æ±‚è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment">// ä¹Ÿå°±æ˜¯è¯´ä»»ä½•è¯·æ±‚éƒ½ä¼šè¿›å…¥è¿™ä¸ªä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment">// ä¸­é—´ä»¶æœ¬èº«æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment">// Request è¯·æ±‚å¯¹è±¡</span></span><br><span class="line"><span class="comment">// Response å“åº”å¯¹è±¡</span></span><br><span class="line"><span class="comment">// next ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment">// // å…¨å±€åŒ¹é…ä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment">// app.use(function(req, res, next) &#123;</span></span><br><span class="line"><span class="comment">// 	console.log(&#x27;1&#x27;);</span></span><br><span class="line"><span class="comment">// 	// å½“ä¸€ä¸ªè¯·æ±‚è¿›å…¥ä¸­é—´ä»¶å</span></span><br><span class="line"><span class="comment">// 	// å¦‚æœéœ€è¦è¯·æ±‚å¦å¤–ä¸€ä¸ªæ–¹æ³•åˆ™éœ€è¦ä½¿ç”¨nextï¼ˆï¼‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">// 	next();</span></span><br><span class="line"><span class="comment">// 	// nextæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment">//  // æ³¨æ„ï¼šnextï¼ˆï¼‰æ–¹æ³•è°ƒç”¨ä¸‹ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä¹Ÿä¼šåŒ¹é…ï¼ˆä¸æ˜¯è°ƒç”¨ç´§æŒ¨ç€çš„å“ªä¸€ä¸ªï¼‰</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"><span class="comment">// app.use(function(req, res, next) &#123;</span></span><br><span class="line"><span class="comment">// 	console.log(&#x27;2&#x27;);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// // 2 å…³å¿ƒè¯·æ±‚è·¯å¾„çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment">// // ä»¥/xxxå¼€å¤´çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment">// app.use(&#x27;/a&#x27;,function(req, res, next) &#123;</span></span><br><span class="line"><span class="comment">// 	console.log(req.url);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 ä¸¥æ ¼åŒ¹é…è¯·æ±‚æ–¹æ³•å’Œè¯·æ±‚è·¯å¾„çš„ä¸­é—´ä»¶</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.post(<span class="string">&#x27;/a&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;/a&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;app is running at port 3000.&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="é”™è¯¯å¤„ç†ä¸­é—´ä»¶"><a href="#é”™è¯¯å¤„ç†ä¸­é—´ä»¶" class="headerlink" title="é”™è¯¯å¤„ç†ä¸­é—´ä»¶"></a>é”™è¯¯å¤„ç†ä¸­é—´ä»¶</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">err,req,res,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err,stack);</span><br><span class="line">    res.status(<span class="number">500</span>).send(<span class="string">&#x27;Something broke&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>é…ç½®ä½¿ç”¨404ä¸­é—´ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.render(<span class="string">&#x27;404.html&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>é…ç½®å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/a&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">	fs.readFile(<span class="string">&#x27;.a/bc&#x27;</span>, <span class="function"><span class="title">funtion</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (err) &#123;</span><br><span class="line">        	<span class="comment">// å½“è°ƒç”¨next()ä¼ å‚åï¼Œåˆ™ç›´æ¥è¿›å…¥åˆ°å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ–¹æ³•ä¸­</span></span><br><span class="line">        	<span class="comment">// å½“å‘ç”Ÿå…¨å±€é”™è¯¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨nextä¼ é€’é”™è¯¯å¯¹è±¡</span></span><br><span class="line">        	<span class="comment">// ç„¶åè¢«å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶åŒ¹é…åˆ°å¹¶è¿›è¡Œå¤„ç†</span></span><br><span class="line">			next(err);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">err,req,res,next</span>)</span>&#123;</span><br><span class="line">    res.status(<span class="number">500</span>).json(&#123;</span><br><span class="line">        <span class="attr">err_code</span>:<span class="number">500</span>,</span><br><span class="line">        <span class="attr">message</span>:err.message</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>





<h2 id="å†…ç½®ä¸­é—´ä»¶"><a href="#å†…ç½®ä¸­é—´ä»¶" class="headerlink" title="å†…ç½®ä¸­é—´ä»¶"></a>å†…ç½®ä¸­é—´ä»¶</h2><ul>
<li>express.static(æä¾›é™æ€æ–‡ä»¶)<ul>
<li><a target="_blank" rel="noopener" href="http://expressjs.com/en/starter/static-files.html#serving-static-files-in-express">http://expressjs.com/en/starter/static-files.html#serving-static-files-in-express</a></li>
</ul>
</li>
</ul>
<h2 id="ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶"><a href="#ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶" class="headerlink" title="ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶"></a>ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</h2><blockquote>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="http://expressjs.com/en/resources/middleware.html">http://expressjs.com/en/resources/middleware.html</a></p>
</blockquote>
<ul>
<li>body-parser</li>
<li>compression</li>
<li>cookie-parser</li>
<li>mogran</li>
<li>response-time</li>
<li>server-static</li>
<li>session</li>
</ul>

      </section>

      
      
        <nav class="article-nav">
          
            <div class="article-nav-item layout-padding">
  <article class="card-container article-nav-card content-padding--primary soft-size--large soft-style--box">
    
    <div class="card-text">
      
        <a href="/2021/11/16/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" itemprop="url">
          <h2 class="card-text--title text-ellipsis">æ­£åˆ™è¡¨è¾¾å¼</h2>
        </a>
      
      <div class="card-text--row">Newer</div>
    </div>
  </article>
</div>
          
          
            <div class="article-nav-item layout-padding">
  <article class="card-container article-nav-card content-padding--primary soft-size--large soft-style--box">
    
    <div class="card-text">
      
        <a href="/2021/11/05/css/" itemprop="url">
          <h2 class="card-text--title text-ellipsis">cssç¬”è®°</h2>
        </a>
      
      <div class="card-text--row">Older</div>
    </div>
  </article>
</div>
          
        </nav>
      

      <section class="page-message-container layout-padding">
        


  
  

  
  


      </section>
    </div>
    <div class="widget-info">
      <section class="widget-author widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-body">
    
      <img src="http://t14.baidu.com/it/u=1118743529,28108615&amp;fm=224&amp;app=112&amp;f=JPEG?w=400&amp;h=400" class="soft-size--round soft-style--box" alt="chendx">
    
    
      <h2>chendx</h2>
    
    
      <p>è´µåœ¨åšæŒ</p>
    

    <div class="count-box">
      <div class="count-box--item">
        <svg class="icon icon-article" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M240.51564747 647.74217627h196.07203239c16.59071043 0 30.16492806-13.57421762 30.16492805-30.16492806V165.10332731c0-33.18142087-30.16492806-60.32985613-60.32985612-60.32985611H245.04038668C225.43318342 104.7734712 210.35071939 119.85593522 210.35071939 139.46313845V617.57724821c0 16.59071043 13.57421762 30.16492806 30.16492808 30.16492806z m663.62841731-452.47392089v482.63884894c0 33.18142087-27.14843525 60.32985613-60.32985612 60.32985613H180.18579134c-33.18142087 0-60.32985613-27.14843525-60.32985612-60.32985613V195.26825538c-49.77213131 0-90.49478418 40.72265287-90.49478417 90.49478417v452.4739209c0 49.77213131 40.72265287 90.49478418 90.49478417 90.49478417h286.56681657c16.59071043 0 30.16492806 13.57421762 30.16492807 30.16492807s13.57421762 30.16492806 30.16492805 30.16492806h90.49478418c16.59071043 0 30.16492806-13.57421762 30.16492805-30.16492806s13.57421762-30.16492806 30.16492807-30.16492807h286.56681657c49.77213131 0 90.49478418-40.72265287 90.49478417-90.49478417V285.76303955c0-49.77213131-40.72265287-90.49478418-90.49478417-90.49478417zM587.41232014 647.74217627h191.54729318c19.60720323 0 34.68966726-15.08246403 34.68966729-34.68966727V134.93839925c0-16.59071043-13.57421762-30.16492806-30.16492808-30.16492805H617.57724821c-30.16492806 0-60.32985613 27.14843525-60.32985612 60.32985611v452.4739209c0 16.59071043 13.57421762 30.16492806 30.16492805 30.16492806z" fill="currentColor"></path>
</svg>
        <span>5</span>
      </div>
      <div class="count-box--item">
        <svg class="icon icon-categories" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M900.3614811 257.09082106h-339.81629553l-67.96326003-101.9448889c-19.41807444-29.12711113-48.54518557-43.69066667-82.52681443-43.69066667H123.6385189c-53.39970333 0-97.09036999 43.69066667-97.09037113 97.09036999v582.54222222c0 53.39970333 43.69066667 97.09036999 97.09037113 97.09037002h776.7229622c53.39970333 0 97.09036999-43.69066667 97.09037113-97.09037002V354.18119104c0-53.39970333-43.69066667-97.09036999-97.09037113-97.09036998z m-97.09036999 242.72592554H220.72888889c-24.27259221 0-48.54518557-24.27259221-48.54518556-48.54518556s24.27259221-48.54518557 48.54518556-48.54518444h582.54222222c24.27259221 0 48.54518557 24.27259221 48.54518556 48.54518444s-24.27259221 48.54518557-48.54518556 48.54518556z" fill="currentColor"></path>
</svg>
        0
      </div>
      <div class="count-box--item">
        <svg class="icon icon-tags" viewBox="0 0 1098 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M283.42180005 272q0-28.38857157-20.09142843-48.48000001t-48.47999998-20.09142842-48.48000002 20.09142842-20.09142846 48.48000001 20.09142846 48.48 48.48000002 20.09142843 48.47999998-20.09142843 20.09142843-48.48zM855.0332285 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.03999997 263.58857157q-20.9142853 19.81714313-48.75428534 19.81714312-28.38857157 0-48.20571468-19.81714312l-383.04-383.58857157q-20.36571468-19.81714313-34.55999999-54.10285688t-14.19428534-62.6742853l0-222.85714313q0-27.84000002 20.36571469-48.20571469t48.2057147-20.36571466l222.85714313 0q28.38857157 0 62.6742853 14.19428529t54.65142842 34.55999999l383.04000001 382.49142843q19.81714313 20.9142853 19.81714314 48.75428532zM1060.74751475 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.04 263.58857157q-20.9142853 19.81714313-48.75428531 19.81714312-19.26857155 0-31.61142843-7.47428531t-28.38857159-24.13714314l251.79428534-251.7942853q19.81714313-19.81714313 19.81714308-48.20571469 0-27.84000002-19.81714308-48.75428531l-383.04000001-382.49142845q-20.36571468-20.36571468-54.65142842-34.55999999t-62.67428532-14.19428534l120 0q28.38857157 0 62.67428532 14.19428534t54.65142842 34.55999999l383.03999998 382.49142845q19.81714313 20.9142853 19.81714314 48.75428531z" fill="currentColor"></path>
</svg>
        5
      </div>
    </div>
  </div>
</section>

      

      
<section class="widet-notice widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-notice" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 945.02305225v28.15620663a24.27259221 24.27259221 0 0 1-24.27259221 24.27259335H394.0352a48.54518557 48.54518557 0 0 1-41.74885888-23.78714112l-110.68302222-184.47170332a132.04290333 132.04290333 0 0 1-17.47626667-48.54518557h118.4502511a200.97706667 200.97706667 0 0 1 76.21594113 14.56355556l20.38897777 133.49925888a48.54518557 48.54518557 0 0 0 36.40888888 27.67075555l16.01991111 2.91271112a24.27259221 24.27259221 0 0 1 20.38897778 25.72894889zM997.45185223 463.45481443a194.18074112 194.18074112 0 0 1-38.8361489 116.50844445 24.75804445 24.75804445 0 0 1-36.4088889 0l-34.95253333-34.95253333a24.27259221 24.27259221 0 0 1-2.91271111-30.58346667 97.09036999 97.09036999 0 0 0 0-106.79940665 24.27259221 24.27259221 0 0 1 2.91271111-30.58346666l34.95253333-34.95253334a24.75804445 24.75804445 0 0 1 18.93262223-7.28177777 26.2144 26.2144 0 0 1 17.47626667 9.70903665A194.18074112 194.18074112 0 0 1 997.45185223 463.45481443z m-194.18074112-388.36148111v776.72296335a48.54518557 48.54518557 0 0 1-48.54518556 48.54518443h-28.64165888a48.54518557 48.54518557 0 0 1-33.98163001-14.07810332l-145.63555556-143.20829668A291.27111111 291.27111111 0 0 0 342.57730333 657.63555556H172.18370333a145.63555556 145.63555556 0 0 1-145.63555556-145.63555556v-97.09036999a145.63555556 145.63555556 0 0 1 145.63555556-145.63555556h170.3936a291.27111111 291.27111111 0 0 0 206.31703779-85.43952668l145.63555555-143.20829554a48.54518557 48.54518557 0 0 1 33.98162888-14.07810446H754.72592555a48.54518557 48.54518557 0 0 1 48.54518556 48.54518555z" fill="currentColor"></path>
</svg>
    <span>NOTICE</span>
  </div>
  <div class="widget-body">
    <p>ç‚¹æ”¶è—ä¸è¿·è·¯https://chendx.info/</p>
  </div>
</section>


      <section class="widget-categorys widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-categories" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M900.3614811 257.09082106h-339.81629553l-67.96326003-101.9448889c-19.41807444-29.12711113-48.54518557-43.69066667-82.52681443-43.69066667H123.6385189c-53.39970333 0-97.09036999 43.69066667-97.09037113 97.09036999v582.54222222c0 53.39970333 43.69066667 97.09036999 97.09037113 97.09037002h776.7229622c53.39970333 0 97.09036999-43.69066667 97.09037113-97.09037002V354.18119104c0-53.39970333-43.69066667-97.09036999-97.09037113-97.09036998z m-97.09036999 242.72592554H220.72888889c-24.27259221 0-48.54518557-24.27259221-48.54518556-48.54518556s24.27259221-48.54518557 48.54518556-48.54518444h582.54222222c24.27259221 0 48.54518557 24.27259221 48.54518556 48.54518444s-24.27259221 48.54518557-48.54518556 48.54518556z" fill="currentColor"></path>
</svg>
    <span>CATEGORYS</span>
  </div>
  <div class="widget-body">
    <ul class="categorys-list">
      
    </ul>
  </div>
</section>

      <section class="widget-tags widget-item  layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-tags" viewBox="0 0 1098 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M283.42180005 272q0-28.38857157-20.09142843-48.48000001t-48.47999998-20.09142842-48.48000002 20.09142842-20.09142846 48.48000001 20.09142846 48.48 48.48000002 20.09142843 48.47999998-20.09142843 20.09142843-48.48zM855.0332285 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.03999997 263.58857157q-20.9142853 19.81714313-48.75428534 19.81714312-28.38857157 0-48.20571468-19.81714312l-383.04-383.58857157q-20.36571468-19.81714313-34.55999999-54.10285688t-14.19428534-62.6742853l0-222.85714313q0-27.84000002 20.36571469-48.20571469t48.2057147-20.36571466l222.85714313 0q28.38857157 0 62.6742853 14.19428529t54.65142842 34.55999999l383.04000001 382.49142843q19.81714313 20.9142853 19.81714314 48.75428532zM1060.74751475 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.04 263.58857157q-20.9142853 19.81714313-48.75428531 19.81714312-19.26857155 0-31.61142843-7.47428531t-28.38857159-24.13714314l251.79428534-251.7942853q19.81714313-19.81714313 19.81714308-48.20571469 0-27.84000002-19.81714308-48.75428531l-383.04000001-382.49142845q-20.36571468-20.36571468-54.65142842-34.55999999t-62.67428532-14.19428534l120 0q28.38857157 0 62.67428532 14.19428534t54.65142842 34.55999999l383.03999998 382.49142845q19.81714313 20.9142853 19.81714314 48.75428531z" fill="currentColor"></path>
</svg>
    <span>TAGS</span>
  </div>
  <div class="widget-body">
    <div class="tags-cloud">
      <a href="/tags/Js%E8%BF%90%E7%AE%97%E7%AC%A6/" style="font-size: 10px;" class="tags-cloud-0">Jsè¿ç®—ç¬¦</a> <a href="/tags/css/" style="font-size: 10px;" class="tags-cloud-0">css</a> <a href="/tags/hexo/" style="font-size: 10px;" class="tags-cloud-0">hexo</a> <a href="/tags/nodejs/" style="font-size: 10px;" class="tags-cloud-0">nodejs</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;" class="tags-cloud-0">æ­£åˆ™è¡¨è¾¾å¼</a>
    </div>
  </div>
</section>
    </div>
  </article>
</div>

    <!-- footer container -->
<footer id="footer" class="footer">
  <div class="footer-container">
    
    <div class="social-icons">
      
        
      
        
      
        
      
        
          <a href="https://github.com/miiiku/" class="soft-size--primary soft-style--box" target="_blank" rel="noopener noreferrer">
            <svg class="icon icon-github" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M64.6 512c0 195.6 125.4 361.9 300.1 422.9 23.5 5.9 19.9-10.8 19.9-22.2v-77.6c-135.8 15.9-141.3-74-150.5-89-18.5-31.5-61.9-39.5-49-54.5 31-15.9 62.5 4 98.9 58 26.4 39.1 77.9 32.5 104.1 26 5.7-23.5 17.9-44.5 34.7-60.9-140.7-25.2-199.4-111.1-199.4-213.3 0-49.5 16.4-95.1 48.4-131.8-20.4-60.6 1.9-112.4 4.9-120.1 58.2-5.2 118.5 41.6 123.3 45.3 33.1-8.9 70.8-13.7 112.9-13.7 42.4 0 80.3 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.4-43.9 2.9 7.7 24.7 58.3 5.5 118.1 32.5 36.8 49 82.8 49 132.4 0 102.3-59 188.3-200.2 213.2 23.5 23.3 38.1 55.5 38.1 91.1v112.7c0.8 9 0 17.9 15.1 17.9C832.7 877 960.4 709.4 960.4 512.1c0-247.5-200.6-447.9-447.9-447.9C265 64.1 64.6 264.5 64.6 512z"></path>
</svg>
          </a>
        
      
        
          <a href="https://twitter.com/guanquanhong" class="soft-size--primary soft-style--box" target="_blank" rel="noopener noreferrer">
            <svg class="icon icon-twitter" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M962.285714 233.142857q-38.285714 56-92.571429 95.428571 0.571429 8 0.571429 24 0 74.285714-21.714286 148.285714t-66 142-105.428571 120.285714-147.428571 83.428571-184.571429 31.142857q-154.857143 0-283.428571-82.857143 20 2.285714 44.571429 2.285714 128.571429 0 229.142857-78.857143-60-1.142857-107.428571-36.857143t-65.142857-91.142857q18.857143 2.857143 34.857143 2.857143 24.571429 0 48.571429-6.285714-64-13.142857-106-63.714286t-42-117.428571l0-2.285714q38.857143 21.714286 83.428571 23.428571-37.714286-25.142857-60-65.714286t-22.285714-88q0-50.285714 25.142857-93.142857 69.142857 85.142857 168.285714 136.285714t212.285714 56.857143q-4.571429-21.714286-4.571429-42.285714 0-76.571429 54-130.571429t130.571429-54q80 0 134.857143 58.285714 62.285714-12 117.142857-44.571429-21.142857 65.714286-81.142857 101.714286 53.142857-5.714286 106.285714-28.571429z"></path>
</svg>
          </a>
        
      
    </div>
     
    <p>&copy; 2022 <a href="/" target="_blank">chendx</a></p>

    

    <p>Powered by <a href="https://hexo.io" target="_blank" rel="noopener noreferrer">Hexo</a> Theme - <a href="https://github.com/miiiku/flex-block" target="_blank" rel="noopener noreferrer author">flex-block</a></p>

    <p>
      <a href="javascript:;" id="theme-light">ğŸŒ æµ…è‰²</a>
      <a href="javascript:;" id="theme-dark">ğŸŒ› æ·±è‰²</a>
      <a href="javascript:;" id="theme-auto">ğŸ¤–ï¸ è‡ªåŠ¨</a>
    </p>
  </div>
</footer>
  </div>

  <div class="back-to-top-fixed soft-size--round soft-style--box">
    <svg class="icon icon-back-to-top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <path d="M725.333333 426.666667c-12.8 0-21.333333-4.266667-29.866667-12.8l-213.333333-213.333333c-17.066667-17.066667-17.066667-42.666667 0-59.733333s42.666667-17.066667 59.733333 0l213.333333 213.333333c17.066667 17.066667 17.066667 42.666667 0 59.733333C746.666667 422.4 738.133333 426.666667 725.333333 426.666667z"></path>
      <path d="M298.666667 426.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733333l213.333333-213.333333c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733333l-213.333333 213.333333C320 422.4 311.466667 426.666667 298.666667 426.666667z"></path>
      <path d="M512 896c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 682.666667C554.666667 878.933333 537.6 896 512 896z"></path>
    </svg>
  </div>

  
  <!-- aplayer -->


<!-- dplayer -->




  


  


  




<script src="/js/script.js"></script>


  
  <!-- å°¾éƒ¨ç”¨æˆ·è‡ªå®šä¹‰ç›¸å…³å†…å®¹ -->
</body>
</html>